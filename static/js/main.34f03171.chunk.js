(this["webpackJsonprocket-chat-front"]=this["webpackJsonprocket-chat-front"]||[]).push([[0],{198:function(e,t,a){},205:function(e,t,a){},256:function(e,t,a){},278:function(e,t,a){e.exports=a.p+"static/media/lol.f8b7a2e4.mp3"},279:function(e,t,a){e.exports=a.p+"static/media/dr_stone_ending.470614e2.mp3"},294:function(e,t){e.exports="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD//gAfQ29tcHJlc3NlZCBieSBqcGVnLXJlY29tcHJlc3P/2wCEAAQEBAQEBAQEBAQGBgUGBggHBwcHCAwJCQkJCQwTDA4MDA4MExEUEA8QFBEeFxUVFx4iHRsdIiolJSo0MjRERFwBBAQEBAQEBAQEBAYGBQYGCAcHBwcIDAkJCQkJDBMMDgwMDgwTERQQDxAUER4XFRUXHiIdGx0iKiUlKjQyNEREXP/CABEIADAAMAMBIgACEQEDEQH/xAAZAAADAQEBAAAAAAAAAAAAAAAEBgcFAwj/2gAIAQEAAAAA9ZrRYbGxpcsNzm2iNsoTABqjV5goZnClHyoLNtFJxlQIOymf/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAgBAhAAAAAAf//EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQMQAAAAAH//xAAeEAACAwEBAQADAAAAAAAAAAAFBgMEBwIBFQASFP/aAAgBAQABEgB8fTYM2AS0tfhLtJeCe3xxU1piHDtGFt6xWHtqqu2D8cBbVmCaugBk5ZrkmxnBxGvYINeYhwvSB7cr1h7cqAJjfNc3qsKysozcdCWfhmYKshK9n7xFoAm0foBblIT7b7iG2NTBDpja60j9EHqDaNhnhqWC1dbFpmwM7JrANlcjagSH898QLBlayxmW9YBrjgEWadHyU5WWxSPsLIw6uEZXI4q3qP78cZi8omZCmbQBsY4aOHT3ROWiVBaHlQSc5RmBXFvqzWpnklOapoJ2ZUEFpoOfeIZNPyvMh2a6GQoZ6uVrdVZLTwT/ABslSs6zZjYsnD3R14aM4KlTAnJ3DJtUZ1fKhNClQEluRRb5KZUGZwoqmLKzA4FVamWsd5BcBQlmpYlzUQnNozir0QgKsyyvdwxHmMWNlm596j51F/QreZaLSpOwCexOrl4oYeJc0eM2zVeYdLGUx1QYKkJjDXucJWS6yuLmlDbw66HK9ihXnq7dE5s4qGuLYBvFqtIVPzk4cZGXZ2a7oYttbS3Fbm9PrNxDCQhDr6h0zYz+rynOSKj8kcsr1lhVcvC1KY0KY4HF+aKMKXMuW13FVllcjq1Tv+xmaqSQSteXz2Mrau6gVa7f54R8wzK0kJ1q3nSxPYmBj5ZpQaaoLEtidaVQ4mWfnzibt/RINCHjwZIxcqhubnE5GnTyfgGiv6GEYLPoc5SIVhVUtlLBDXQDKczVxrasA4gvs8GQsRIXpBBuaaxBuawEwPmwujOgC4ACSzeS9jx1Wn1J+f/EACcQAAICAQQBBAEFAAAAAAAAAAIDAQQABRESMRMUISMyEBUkQkNR/9oACAEBABM/ALT/AE9SpTr7Qb3nETPc7QI5Xsy+jqFUFGQsUe0EMcw4FGWbMopUKkrAja49pKY5HxGIxFmX0b9WFnINUe0FA8w4lGVvkVpU2lCYG4ftKpIuPLLcQE364dWQDsFlP13y8SCRbqOmJYhyXGHMMr2KyFKrhWZK6tVAGXZlj7NWwltdqA8lW0kzHK9ishSkLQcrq1UAZZGqVlJusXWCBVbjlykFl/DBuqtjpinf0LkJkoVy3keWX6SbJgM9wMsGdoxOmVwYpq6pkJgUB7EOL0ms6aUvrBMWbO4SRAR9lhaTWRNyUVin1NXYYMRE+iy7UrIr16sLACs2WysiKTPNMUnwW6rt5S9TVAEmGXbaq5GMdyEMKN8VqVc2MYdQ4EAGD3kpxWq1k+t8NYf21ncucBB9jh6pWfNKXVj3rVtikyAj6HLlqs+vZqEoDmtYVLBIZA801iYRVqo3hSEqUZyAZY05F0dLW3prfJBEKZLP0WoiLbEVDmbFOYDnAgfR4+jTQpaFoDy2rTzWXZFlWjTcDEmg/FbqPBY9EON0ioZmZoGZIpkPcpzT6KapMGOoKVCO8ZVmAjUUh1Xaf2Fcl7ltlv5V6VF1BKlay+xKgi3yzWl9K/UhYCanBvBRHIOQzGIrSijQqysxBSg3kpHmfIpwY2g5QqFyUR/k7fj/xAAUEQEAAAAAAAAAAAAAAAAAAAAw/9oACAECAQE/AB//xAAUEQEAAAAAAAAAAAAAAAAAAAAw/9oACAEDAQE/AB//2Q=="},323:function(e,t,a){e.exports=a(537)},328:function(e,t,a){},336:function(e,t){},338:function(e,t){},374:function(e,t){},375:function(e,t){},448:function(e,t,a){},449:function(e,t,a){},452:function(e,t,a){},491:function(e,t,a){},526:function(e,t,a){},537:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(17),o=a.n(c),s=(a(328),a(329),a(10)),i=a.n(s),l=a(19),u=a(7),m=a(34),d=a(96),f=a(70),g=a(39),h=a(24);function p(e){var t=e.setIsMobile,a=Object(n.useState)(!0),c=Object(u.a)(a,2),o=c[0],s=c[1],i=function(e){t(e),s(!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,{show:o,onHide:function(){return s(!1)},centered:!0},r.a.createElement(g.a.Body,{closebutton:"true",className:"tc"},r.a.createElement("h3",null,"Switch to mobile version"),r.a.createElement("div",null,r.a.createElement(h.a,{variant:"primary",onClick:function(){return i(!0)}},"Yes"),r.a.createElement(h.a,{style:{marginLeft:"10%"},variant:"secondary",onClick:function(){return i(!1)}},"No")))))}a(205);var v=a(278),E=a.n(v),b=a(279),A=a.n(b),w=a(280),y=function e(t){var a=t.dbId,n=t.id,r=t.message,c=t.dateTime;Object(w.a)(this,e),this.dbId=a,this.id=n,this.message=r,this.dateTime=c},O="https://rocket-chat-api.azurewebsites.net/",j="B?E(H+MbQeThWmZq",k="8G08T5AVQmeuECTfQCSY01ayQ7Dov4eD+reNumjCNtI=",x="pw7I2NywUBxIZQYAjenxWQ==",C=["Audio","Add Contact","My Account","Logout"],N=["witcher","drStone"],S=[{str:"weak",color:"red"},{str:"weakish",color:"darkorange"},{str:"medium",color:"#E1CB0C"},{str:"okay",color:"springgreen"},{str:"strong",color:"green"}],I=["/faq","/release","/vsuccess","/vfailed"],B=[{question:"Q: What do I do here?",answer:"A: You send messages to other people, could you imagine!!!"},{question:"Q: How to get started?",answer:"A: Please register, then add other people and talk to them as much as you want. Please mind the warning above when you submit any data."},{question:"Q: Who are the creators of this miracle?",answer:"A: Bohdan Boss and Artem Daddy :))"},{question:"Q: What are future plans for this project?",answer:"A: Show WhatsApp and Telegram how to make good apps..."},{question:"Q: Why can I not send emoji without text on PC?",answer:"A: This is a known issue and might be fixed later, hold tight!"},{question:"Q: Are my messages 100% secure?",answer:"A: Let's say sending credit card details is not a good idea, but gossips are totally fine."},{question:"Q: How can I suggest improvements?",answer:"A: Just start a chat with one of the Creators and show us your ideas."},{question:"Q: Lorem Ipsum?",answer:"A: Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."}],M=[{version:"v0.3.5",changes:["Introduced new in-chat gaming platform and added tic-tac-toe"]},{version:"v0.3.4",changes:["Further improved chat window UI"]},{version:"v0.3.3",changes:["Improved user status detection"]},{version:"v0.3.2",changes:["Improved chat window UI and built-in emoji"]},{version:"v0.3.1",changes:["Fix login and cookie related bugs"]},{version:"v0.3",changes:["Security updates","Notification settings","More efficient live communication","Email verification","Login with Google","Bugfixes and other minor improvements","Semi-advanced security for messages","Added cookies support"]},{version:"v0.2.1",changes:["Bugfixes and UI improvements"]},{version:"v0.2",changes:["Chats are sorted based on last message","Automatic reconnection in case of disconnect","Online/Offline status of users with notifications","Account settings with live update","Emoji for desktop users","Bugfixes and other minor improvements"]},{version:"v0.1",changes:["Registration/Login","Live messages","Message history is saved and is reloaded on login","Can add others to contact list","Audio settings"]}],T=a(83),U=a.n(T);function L(e){return Q.apply(this,arguments)}function Q(){return(Q=Object(l.a)(i.a.mark((function e(t){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=U.a.sign({userId:t},j),e.next=4,fetch("".concat(O,"/api/getallchats"),{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({token:a})});case 4:return n=e.sent,e.next=7,n.json();case 7:return n=e.sent,e.abrupt("return",n);case 11:throw e.prev=11,e.t0=e.catch(0),e.t0;case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function F(e,t,a){return D.apply(this,arguments)}function D(){return(D=Object(l.a)(i.a.mark((function e(t,a,n){var r,c,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],e.prev=1,c=U.a.sign({chatId:t,totalMessages:n},j),e.next=5,fetch("".concat(O,"/api/getlastmessages"),{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({token:c})});case 5:return o=e.sent,e.next=8,o.json();case 8:return o=e.sent,e.next=11,o.forEach((function(e){var t=e.userId===a.userId?0:1;r.push(new y({id:t,message:e.messageText,dateTime:e.createdDate}))}));case 11:return e.abrupt("return",r);case 14:throw e.prev=14,e.t0=e.catch(1),e.t0;case 17:case"end":return e.stop()}}),e,null,[[1,14]])})))).apply(this,arguments)}function G(e,t){return q.apply(this,arguments)}function q(){return(q=Object(l.a)(i.a.mark((function e(t,a){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(O,"/api/").concat(a),{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify(t)});case 3:return n=e.sent,r=n.status,e.next=7,n.json();case 7:return n=e.sent,W(r,n.text),e.abrupt("return",n);case 12:throw e.prev=12,e.t0=e.catch(0),e.t0;case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}function P(){return(P=Object(l.a)(i.a.mark((function e(t,a){var n,r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log(O),n=U.a.sign({userId:t,emailToAdd:a},j),e.next=5,fetch("".concat(O,"/api/addchat"),{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({token:n})});case 5:return r=e.sent,c=r.status,e.next=9,r.json();case 9:return r=e.sent,W(c,r.text),e.abrupt("return",r);case 14:throw e.prev=14,e.t0=e.catch(0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}function Y(){return(Y=Object(l.a)(i.a.mark((function e(t,a,n,r,c){var o,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o=U.a.sign({userId:t,sound:a,newchat:n,newmessage:r,connection:c},j),e.next=4,fetch("".concat(O,"/api/settingsapply"),{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({token:o})});case 4:return s=e.sent,W(s.status,s.text),e.abrupt("return","ok");case 10:throw e.prev=10,e.t0=e.catch(0),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function W(e,t){switch(e){case 400:throw new Error(t);case 500:case 404:throw new Error("Server error,try again later")}}function R(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"===typeof e)return H(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(a);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return H(e,t)}(e))){var t=0,a=function(){};return{s:a,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,r,c=!0,o=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return c=e.done,e},e:function(e){o=!0,r=e},f:function(){try{c||null==n.return||n.return()}finally{if(o)throw r}}}}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function K(e,t){var a=[];return e.forEach((function(e){var n,r;if(e.lastMessage){n=e.lastMessage.userId===t?0:1;var c=e.lastMessage;r={id:e.chatId,image:e.friendImageUrl,isOnline:e.isOnline,lastMessagesAreFetched:!1,name:e.friendUserName,msg:[new y({id:n,message:z(c.messageText,!0),dateTime:c.createdDate})]}}else r={id:e.chatId,image:e.friendImageUrl,isOnline:e.isOnline,lastMessagesAreFetched:!1,name:e.friendUserName,msg:[]};r.game={},a.push(r)})),a}var V=function(e,t){var a,n=0,r=R(t);try{for(r.s();!(a=r.n()).done;){if(a.value.id===e)return n;n++}}catch(c){r.e(c)}finally{r.f()}return-1},Z=function(){var e=Object(l.a)(i.a.mark((function e(t,a,n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F(t,a,n.msg.length);case 3:return r=e.sent,n.msg.forEach((function(e){r.push(e)})),n.lastMessagesAreFetched=!0,n.msg=[],n.msg=Object(m.a)(r),e.abrupt("return",n);case 11:throw e.prev=11,e.t0=e.catch(0),e.t0;case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,a,n){return e.apply(this,arguments)}}(),J=function(e,t){var a={},n={found:!1};e.forEach((function(e){var t=e.id;a[t]=1}));var r,c=R(t);try{for(c.s();!(r=c.n()).done;){var o=r.value;if(o in a){n.found=!0,n.id=o;break}}}catch(s){c.e(s)}finally{c.f()}return n},z=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=e.indexOf("#GAME#"),n=e,r="";return-1!==a&&(n=e.slice(0,a-1),r=e.slice(a+"#GAME#".length)),t?n+r:{text:n,gameName:r}},X=a(281),_=a.n(X),$=a(48),ee=a(318),te=a(116);var ae=function(e){var t=e.show,a=e.handleClose,c=e.updateAudio,o=e.chooseSong,s=Object(n.useState)(0),i=Object(u.a)(s,2),l=i[0],m=i[1],d=Object(n.useState)(""),f=Object(u.a)(d,2),h=f[0],p=f[1],v=function(e){return e?"primary":"secondary"};return r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,{show:t,onHide:a,centered:!0},r.a.createElement(g.a.Body,null,r.a.createElement("h3",null,"Audio settings"),r.a.createElement("h5",null,"Current song"),r.a.createElement($.a,null,r.a.createElement($.a.Toggle,{variant:"success",id:"dropdown-basic"},h?r.a.createElement(r.a.Fragment,null,h):r.a.createElement(r.a.Fragment,null,"Choose song ")),r.a.createElement($.a.Menu,null,N.map((function(e){return r.a.createElement($.a.Item,{key:e,onClick:function(){return function(e){m(0),o(e),p(e)}(e)}},e)})))),r.a.createElement("h4",null," Playback "),r.a.createElement(ee.a,{type:"radio",name:"options",value:l,onChange:function(e){m(e),e&&h?c(!0):e||c(!1)}},r.a.createElement(te.a,{variant:v(Boolean(l)),value:1},"On"),r.a.createElement(te.a,{variant:v(!Boolean(l)),value:0},"Off")))))},ne=a(64),re=a(282);var ce=function(e){var t=e.show,a=e.handleClose,c=e.createNewChat,o=Object(n.useState)(""),s=Object(u.a)(o,2),i=s[0],l=s[1],m=Object(n.useState)(""),d=Object(u.a)(m,2),f=d[0],p=d[1],v=Object(n.useContext)(Vt).user,E=v?v.userId:0;return r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,{show:t,onHide:a,centered:!0},r.a.createElement(g.a.Body,null,r.a.createElement("h3",null,"Add contact "),r.a.createElement(ne.a,{onSubmit:function(e){e.preventDefault(),function(e,t){return P.apply(this,arguments)}(E,i).then((function(e){if(e){var t=e.chatId,n=e.userName,r=e.friendImageUrl;c(t,n,r),a()}})).catch((function(e){e.toString().includes("Failed to fetch")?p("No response from the server"):p(e.message)}))}},r.a.createElement(ne.a.Group,{controlId:"formBasicEmail"},r.a.createElement(ne.a.Label,null,"Email address"),r.a.createElement(ne.a.Control,{type:"email",placeholder:"Enter email",onChange:function(e){return l(e.target.value)}}),r.a.createElement(ne.a.Text,{className:"text-muted"},"Ask creators about their current emails.")),f?r.a.createElement(re.a,null,r.a.createElement("div",{className:"dark-red"},f)):r.a.createElement(r.a.Fragment,null),r.a.createElement(h.a,{variant:"primary",type:"submit",disabled:!(i.length>0)},"Add friend")))))},oe=a(72),se=a(63),ie=a(286),le=a(68),ue=a(111),me=a(284),de=a.n(me);var fe=function(e){var t=e.type,a=e.UpdateUserData,c=Object(n.useState)(""),o=Object(u.a)(c,2),s=o[0],i=o[1],l=Object(n.useState)({show:!1,type:""}),m=Object(u.a)(l,2),d=m[0],f=m[1];function g(){return s.length>2}return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var n={type:t,value:s};"image"!==t||de()(s)?(a(n.type,n.value),f({show:!0,type:"success"})):f({show:!0,type:"danger"}),i("")}},r.a.createElement(ne.a.Row,null,r.a.createElement(le.a,null,r.a.createElement(ne.a.Control,{placeholder:"new "+t,value:s,onChange:function(e){return i(e.target.value)}})),r.a.createElement(le.a,null,r.a.createElement(h.a,{type:"submit",variant:g()?"primary":"secondary",disabled:!g()}," Update!")),d.show?r.a.createElement(ue.a,{variant:d.type,onClose:function(){return f({show:!1,type:""})},dismissible:!0,className:"ma2"},"danger"===d.type?"Your ".concat(t," change failed with many errors!"):"Your "+t+" was changed successfully!"):r.a.createElement("div",null))))},ge=a(285),he=a.n(ge);function pe(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"===typeof e)return ve(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(a);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return ve(e,t)}(e))){var t=0,a=function(){};return{s:a,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,r,c=!0,o=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return c=e.done,e},e:function(e){o=!0,r=e},f:function(){try{c||null==n.return||n.return()}finally{if(o)throw r}}}}function ve(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var Ee=function(e){var t=e.name,a=e.activeSwitches,c=e.handleChange,o=Object(n.useState)(""),s=Object(u.a)(o,2),i=s[0],l=s[1];Object(n.useEffect)((function(){var e=t.match(/([A-Z]?[^A-Z]*)/g).slice(0,-1),a="";if(e){var n,r=pe(e);try{for(r.s();!(n=r.n()).done;){var c=n.value;a+=" "+(c=m(c))}}catch(o){r.e(o)}finally{r.f()}}else a=t=m(t);l(a)}));var m=function(e){var t=e.charAt(0);return t===t.toLowerCase()&&t!==t.toUpperCase()?t.toUpperCase()+e.substring(1):e};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"col-8",style:{marginRight:"5px"}},i),r.a.createElement("div",{className:"col-2"},r.a.createElement("label",null,r.a.createElement(he.a,{onChange:function(){return c(t)},checked:Boolean(a[t]),onColor:"#86d3ff",onHandleColor:"#2693e6",handleDiameter:30,uncheckedIcon:!1,checkedIcon:!1,boxShadow:"0px 1px 5px rgba(0, 0, 0, 0.6)",activeBoxShadow:"0px 0px 1px 10px rgba(0, 0, 0, 0.2)",height:20,width:48}))))};var be=function(e){var t=e.UpdateUserData,a=(e.handleClose,Object(n.useContext)(Vt).user),c=Object(n.useState)(a.notificationSettings),o=Object(u.a)(c,2),s=o[0],i=o[1],l=Object(n.useState)({show:!1,type:""}),m=Object(u.a)(l,2),f=m[0],g=m[1];function p(e){var t=Object(d.a)({},s);t[e]=!t[e],i(t)}return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t("notifications",s);var n=s.sound,r=s.newChatReceived,c=s.newMessageReceived,o=s.connectionChanged;(function(e,t,a,n,r){return Y.apply(this,arguments)})(a.userId,n,r,c,o).then((function(){return g({show:!0,type:"success"})})).catch((function(e){g({show:!0,type:"danger"}),console.log(e)}))}},r.a.createElement("label",null,r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row h-auto",style:{alignContent:"start"}},Object.keys(s).map((function(e,t){return 0===t?r.a.createElement("div",{key:e}):r.a.createElement(Ee,{handleChange:p,activeSwitches:s,name:e,key:e})}))))),r.a.createElement("br",null),f.show?r.a.createElement(ue.a,{variant:f.type,onClose:function(){return g({show:!1,type:""})},dismissible:!0,className:"ma2"},"danger"===f.type?"Failed to save notification settings!":"Notification settings changed successfully!"):r.a.createElement("div",null),r.a.createElement("br",null)," ",r.a.createElement(h.a,{type:"submit"}," Save ")))};var Ae=function(e){var t=e.show,a=e.handleClose,c=e.UpdateUserData,o=Object(n.useContext)(Vt).user;return r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,{show:t,onHide:a,centered:!0},r.a.createElement(g.a.Body,null,r.a.createElement("h3",null,"My Account"),r.a.createElement(ie.a,{defaultActiveKey:"Picture",id:"uncontrolled-tab-example"},r.a.createElement(se.a,{eventKey:"Picture",title:"Picture"},o.imageUrl?r.a.createElement(oe.a,null,r.a.createElement(oe.a.Image,{roundedCircle:!0,width:100,height:120,alt:"profile picc",src:o.imageUrl}),r.a.createElement(oe.a.Caption,null,"Your profile picture."),r.a.createElement("div",null,r.a.createElement(fe,{UpdateUserData:c,type:"image"}))):r.a.createElement("span",{className:"ma2"}," You have no pic",r.a.createElement("div",null,r.a.createElement(fe,{UpdateUserData:c,type:"image"})))),r.a.createElement(se.a,{eventKey:"Name",title:"Name"},r.a.createElement("div",{className:"ma2 "},r.a.createElement("h6",null,"Your current name is ",r.a.createElement("strong",null,o.userName)),r.a.createElement(fe,{UpdateUserData:c,type:"name"}))),r.a.createElement(se.a,{eventKey:"Notifications",title:"Notifications"},r.a.createElement("div",{className:"ma2 "},r.a.createElement(be,{UpdateUserData:c})))),r.a.createElement(h.a,{style:{float:"right"},onClick:function(){return a()}},"Close"))))};a(448);var we=function(e){var t=e.updateAudio,a=e.logout,c=e.chooseSong,o=e.createNewChat,s=e.UpdateUserData,i=Object(n.useState)({type:"",seen:!1}),l=Object(u.a)(i,2),m=l[0],d=l[1],f=function(){return d({type:"",seen:!1})};return r.a.createElement(r.a.Fragment,null,r.a.createElement($.a,{className:"settings-ext"},r.a.createElement($.a.Toggle,{variant:"secondary",size:"sm",id:"dropdown-basic"},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},r.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}))),r.a.createElement("span",{className:"app-name"}," Rocket chat ",M[0].version),r.a.createElement($.a.Menu,null,C.map((function(e,t){return"Logout"===e?r.a.createElement($.a.Item,{key:e,onClick:a},C[t]):r.a.createElement($.a.Item,{key:e,onClick:function(){return e=C[t],d({type:e,seen:!0});var e}},C[t]," ")})))),{"Add Contact":r.a.createElement(ce,{show:m.seen,handleClose:f,createNewChat:o}),Audio:r.a.createElement(ae,{show:m.seen,handleClose:f,updateAudio:t,chooseSong:c}),"My Account":r.a.createElement(Ae,{show:m.seen,handleClose:f,UpdateUserData:s}),Logout:r.a.createElement(r.a.Fragment,null)}[m.type])},ye=(a(449),a(50));a(451);var Oe=function(e){var t=e.clickOnChat,a=e.setChatIndex,c=Object(n.useContext)(Vt).chats,o=Object(n.useContext)(kt),s=o.chatIndex,i=o.isMobile,l={margin:"2px",backgroundColor:"#383838",color:"white"},u={margin:"0px ",marginBottom:"5px ",marginTop:"5px ",backgroundColor:"black",color:"white"};return r.a.createElement(ye.g,null,r.a.createElement(ye.b,{className:"scrollable"},c.map((function(e,n){return r.a.createElement("div",{onClick:function(){return function(e,n){t(e,n,!0),a(n)}(e.id,n)},key:e.id},r.a.createElement(ye.c,{style:n!==s||i?l:u},e.image?r.a.createElement(ye.a,{imgUrl:e.image}):r.a.createElement(ye.a,{letter:e.name.charAt(0),style:{color:"black !important"}}),r.a.createElement(ye.d,null,r.a.createElement(ye.e,{justify:!0},r.a.createElement(ye.h,{ellipsis:!0},e.name),r.a.createElement(ye.f,{style:{marginLeft:"5px"}},e.isOnline?r.a.createElement("status-indicator",{active:!0}):r.a.createElement("div",null))),r.a.createElement(ye.f,{ellipsis:!0},e.msg.length>0?z(e.msg[e.msg.length-1].message,!0):"Say something"))))}))))};function je(e){var t=e.createNewChat,a=e.LoadTenMessages,c=e.updAudio,o=e.setSong,s=e.logout,i=e.setChatIndex,l=e.UpdateUserData,u=Object(n.useContext)(kt).isMobile;return r.a.createElement("div",{className:u?"left-side col-12":"left-side col-4 col-sm-4 col-md-4 col-lg-2 col-xl-2"},r.a.createElement(we,{createNewChat:t,updateAudio:c,chooseSong:o,logout:function(){return s()},UpdateUserData:l}),r.a.createElement(Oe,{clickOnChat:a,setChatIndex:i}))}var ke=a(203),xe=a(204),Ce=a(558),Ne=a(560),Se=a(564),Ie=a(561),Be=a(562),Me=a(304),Te=a.n(Me),Ue=a(302),Le=a.n(Ue),Qe=a(301),Fe=a.n(Qe),De=a(303),Ge=a.n(De),qe=(a(452),a(294)),Pe=[{name:"Tic-Tac-Toe",icon:a.n(qe).a}],Ye=["StartNewGame","EndGame","NewTurn"];function We(e){var t=e.sendMessage;return r.a.createElement("div",null,r.a.createElement("div",{className:"pick-header"},r.a.createElement("h3",{className:"border-bottom border-dark pa3 shadow-5 header-text "},"Pick a game")),r.a.createElement("div",null," ",Pe.map((function(e){return r.a.createElement(oe.a,{className:"pa2",key:e.name},r.a.createElement(oe.a.Image,{alt:"Tic tac toe icon",className:"ic",src:e.icon,onClick:function(){return a=e.name,void t("Let's fight to death in a game of ".concat("#GAME# "+a),!0);var a}}),r.a.createElement(oe.a.Caption,null,e.name))}))))}a(453),a(256);var Re=a(316),He=function(){var e=document.getElementsByClassName("chat-panel")[0],t=e.scrollHeight-e.clientHeight;e.scrollTop=t>0?t:0},Ke=function(){var e=document.getElementsByClassName("chat-panel")[0],t=document.body,a="scrollTop",n="scrollHeight";return(e[a]||t[a])/((e[n]||t[n])-e.clientHeight)*100},Ve=Object(Ce.a)((function(){return{root:{padding:"2px 4px",display:"flex",alignItems:"center"},input:{flex:1,wordWrap:"break-word"},iconButton:{padding:10,height:"100%"},divider:{margin:4,height:"100%"}}}));function Ze(e){var t=e.onSendClick,a=Ve(),c=Object(n.useState)(""),o=Object(u.a)(c,2),s=o[0],i=o[1],l=function(){return s.trim().length>0};return r.a.createElement(Ne.a,{component:"form",className:a.root,onSubmit:function(e){e.preventDefault(),t(s),i("")}},r.a.createElement(ke.a,{trigger:"click",placement:"top",overlay:r.a.createElement(xe.a,{id:"popover-basic"},r.a.createElement(Re.a,{title:"Emoji v2",showPreview:!1,set:"emojione",onSelect:function(e){var t="".concat(s).concat(e.native);i(t)}}))},r.a.createElement(Be.a,{className:a.iconButton,"aria-label":"emoji"},r.a.createElement(Fe.a,{className:"ic"}))),r.a.createElement(Se.a,{onKeyPress:function(e){"Enter"===e.key&&(e.preventDefault(),t(s),i(""),setTimeout((function(){He()}),20))},onChange:function(e){i(e.target.value),He()},value:s,rowsMax:8,multiline:!0,className:a.input,placeholder:"write smth",onClick:function(){return setTimeout((function(){return He()}),100)},inputProps:{"aria-label":"search google maps"}}),r.a.createElement(ke.a,{trigger:"click",hi:!0,placement:"top",overlay:r.a.createElement(xe.a,{id:"popover-basic"},r.a.createElement(We,{sendMessage:t}))},r.a.createElement(Be.a,{className:a.iconButton,"aria-label":"games"},r.a.createElement(Le.a,{className:"ic"}))),r.a.createElement(Be.a,{className:a.iconButton,"aria-label":"upload"},r.a.createElement(Ge.a,{className:"ic"})),r.a.createElement(Ie.a,{className:a.divider,orientation:"vertical"}),r.a.createElement(Be.a,{type:"submit",color:l()?"primary":"secondary",disabled:!l(),className:a.iconButton,"aria-label":"send"},r.a.createElement(Te.a,{className:"ic"})))}function Je(e){var t=e.disable,a=e.row,c=e.col,o=e.setValue,s=e.value,i=Object(n.useState)(!1),l=Object(u.a)(i,2),m=l[0],d=l[1];Object(n.useEffect)((function(){d(!!t)}),[t]);return r.a.createElement("div",{className:"square ".concat(s),onClick:function(e){m||(d(!0),o(a,c))}},r.a.createElement("span",null,s))}var ze=a(305),Xe=a.n(ze);a(491);function _e(e){var t=e.setChats,a=e.inGameAction,c=Object(n.useContext)(kt).chatIndex,o=Object(n.useContext)(Vt),s=o.chats,i=o.user,l=function(e,n){t((function(t){var a=Object(m.a)(t),r=a[c].game;return r.board[e][n]=r.currentPlayer,r.winner=Xe()(r.board,3,3,3,e,n),r.currentPlayer="X"===r.currentPlayer?"O":"X",a}));var r=s[c].game;a(Ye[2],r),r.winner&&a(Ye[1],{})};return r.a.createElement("div",{className:"board"},function(){var e=s[c].game,t="";return e.winner?(t+="The winner: ",t+=e.currentPlayer===e.myMark?i.userName:s[c].name):(t+="Current player: ",t+=e.currentPlayer!==e.myMark?i.userName:s[c].name),r.a.createElement("div",{className:"status tc"},t)}(),function(){for(var e=Object(m.a)(s[c].game.board),t=[],a=0;a<3;a++){for(var n=[],o=0;o<3;o++)n.push(r.a.createElement(Je,{row:a,col:o,key:a+o,setValue:l,value:e[a][o],disable:s[c].game.currentPlayer===s[c].game.myMark||Boolean(s[c].game.winner)||Boolean(e[a][o])}));t.push(r.a.createElement("div",{className:"board-row",key:"row"+a},n))}return r.a.createElement("div",{className:"rows-holder",style:{width:168}},t)}())}var $e=a(307),et=a.n($e),tt=a(306),at=a.n(tt),nt=a(94);var rt=function(e){var t=e.InGameAction,a=e.chatData,c=e.setChats,o=Object(n.useContext)(kt).chatIndex,s=et()(),i=s.width,l=s.height,d=Object(n.useState)(!1),f=Object(u.a)(d,2),g=f[0],p=f[1],v=Object(nt.useToasts)().addToast,E=function(e){e&&t(Ye[1],{surrender:e}),c((function(e){var t=Object(m.a)(e);return t[o].game={},t}))};return Object(n.useEffect)((function(){He()}),[]),Object(n.useEffect)((function(){a.game.winner&&a.game.currentPlayer===a.game.myMark&&(p(!0),setTimeout((function(){return p(!1)}),5e3))}),[a.game,a.game.winner]),r.a.createElement("div",{className:"overflow-hidden flex flex-column"},a.game.name?r.a.createElement(Ne.a,{className:"game-window pa2 shadow-5 "},r.a.createElement("h3",null,a.game.name),g?r.a.createElement(at.a,{width:i,height:l}):r.a.createElement("div",null),r.a.createElement("div",null,{"Tic-Tac-Toe":r.a.createElement(_e,{setChats:c,inGameAction:t})}[a.game.name.trim()]),a.game.winner?r.a.createElement(h.a,{className:"tc",variant:"primary",onClick:function(){return E(!1)}},"Close"):r.a.createElement(h.a,{className:"tc",variant:"danger",onClick:function(){return E(!0)}},"SURRENDER")):r.a.createElement("div",null),r.a.createElement("ul",{className:"chat-panel"},a.msg.map((function(e,n){return r.a.createElement("li",{key:n,className:0===e.id?"me":"him"},r.a.createElement("div",{className:"messsage-text"},z(e.message).text,r.a.createElement("span",{className:"underline pointer blue",onClick:function(){return function(e,n){var r=z(e.message).gameName.trim();a.game.name?v("Close your current game!",{appearance:"warning",autoDismiss:!0}):c((function(e){var a=Object(m.a)(e);a[o].msg.splice(n,1);var c=a[o].game;switch(c.name=r,r){case Pe[0].name:c.board=[["","",""],["","",""],["","",""]],c.currentPlayer="X",c.myMark="O"}return c.winner="",t(Ye[0],c),a}))}(e,n)}},z(e.message).gameName)))}))))};var ct=function(e){var t=e.InGameAction,a=e.setChats,c=e.chatData,o=e.onSend,s=e.loadTen,i=e.GoBack,l=Object(n.useContext)(kt),m=l.chatId,d=l.chatIndex,f=l.isMobile,g=Object(n.useState)(100),p=Object(u.a)(g,2),v=p[0],E=p[1];Object(n.useEffect)((function(){A()}),[]);var b=function(e){s(m,d,!1),E(Ke())},A=function(){document.getElementsByClassName("chat-panel")[0].addEventListener("scroll",(function(){requestAnimationFrame((function(){E(Ke())}))}))};return r.a.createElement("div",{id:"chat-side"},f?r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row header"},r.a.createElement(h.a,{type:"button",variant:"secondary",className:"col-2 arrow-back ",onClick:function(){return i("left")}},r.a.createElement("span",{className:"btn-label"},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},r.a.createElement("path",{fill:"none",d:"M0 0h24v24H0V0z"}),r.a.createElement("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"}))),"Back"),r.a.createElement("div",{className:"white tc col-10",style:{backgroundColor:"#6c757d"}},r.a.createElement("strong",{className:"black"},c.name)," is",r.a.createElement("span",{className:c.isOnline?"dark-blue":"white"}," ",c.isOnline?" online":" offline"),r.a.createElement("h5",{className:"hover-bg-white-40 pointer",onClick:b},"Load more messages")))):r.a.createElement("h4",{className:"white tc hover-bg-white-40 pointer col-10 flex-none align-self-center",onClick:b},"Load more"),r.a.createElement(rt,{InGameAction:t,setChats:a,chatData:c}),v<=55?r.a.createElement("div",null,r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24",className:"down-btn",onClick:function(){return He()}},r.a.createElement("path",{d:"M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"}),r.a.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}))):r.a.createElement("div",null),r.a.createElement("footer",{className:"footer"},r.a.createElement(Ze,{onSendClick:o})))};function ot(e){var t=e.InGameAction,a=e.setChats,c=e.LoadTenMessages,o=e.SendMessage,s=e.GoBack,i=Object(n.useContext)(Vt).chats,l=Object(n.useContext)(kt),u=l.chatIndex,m=l.isMobile;return r.a.createElement("div",{className:m?"right-side col-12":"right-side col-8 col-sm-8 col-md-8 col-lg-10 col-xl-10 "},r.a.createElement("div",{className:"overflow-hidden"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},-1===u?0!==i.length?r.a.createElement("div",{className:"tc center col align-self-center",id:"idle-msg"},"Click on a chat to start messaging!"):r.a.createElement("div",{className:"tc center col align-self-center",id:"idle-msg"},"Click on a button in top left corner and add someone!"):r.a.createElement("div",{className:"col"},r.a.createElement(ct,{InGameAction:t,setChats:a,loadTen:c,chatData:i[u],onSend:o,GoBack:s}))))))}var st=a(99),it=a.n(st),lt=a(49),ut=a.n(lt);function mt(e){var t=e.name,a=e.sound;return r.a.createElement("div",null,r.a.createElement("strong",null,"New chat!"),r.a.createElement("div",null,r.a.createElement("strong",null,t)," created a chat with you!"),a?r.a.createElement(ut.a,{url:it.a,autoLoad:!0,playStatus:ut.a.status.PLAYING}):r.a.createElement("div",null))}function dt(e){var t=e.name,a=e.body,n=e.sound;return r.a.createElement("div",null,r.a.createElement("strong",null,t),r.a.createElement("div",null,a),n?r.a.createElement(ut.a,{url:it.a,autoLoad:!0,playStatus:ut.a.status.PLAYING}):r.a.createElement("div",null))}function ft(e){var t=e.failed,a=e.sound;return r.a.createElement("div",null,r.a.createElement("strong",null,"Game BOT"),r.a.createElement("div",null,t?r.a.createElement("div",null," Your invitation was ",r.a.createElement("strong",null,"NOT")," sent!",r.a.createElement("br",null),r.a.createElement("strong",null,"Please finish current game first!!1!")):r.a.createElement("div",null,"Your invitation was sent!",r.a.createElement("br",null),r.a.createElement("strong",null,"If your friend is offline he won't get it!"))),a?r.a.createElement(ut.a,{url:it.a,autoLoad:!0,playStatus:ut.a.status.PLAYING}):r.a.createElement("div",null))}function gt(e){var t=e.online,a=e.sound;return r.a.createElement("div",null,r.a.createElement("strong",null,"Connection status changed!"),r.a.createElement("div",null,t?"You are online now":"You went offline, your messages will not be sent!"),t?r.a.createElement("div",null):r.a.createElement("div",null,"We will try to reconnect you!"),a?r.a.createElement(ut.a,{url:it.a,autoLoad:!0,playStatus:ut.a.status.PLAYING}):r.a.createElement("div",null))}function ht(e){var t=e.isLast,a=e.nextTime,c=e.sound,o=Object(n.useState)(a),s=Object(u.a)(o,2),i=s[0],l=s[1];return Object(n.useEffect)((function(){var e=setInterval((function(){return l(i-1)}),1e3);return function(){clearInterval(e)}}),[i]),r.a.createElement("div",null,r.a.createElement("strong",null,"Reconnection failed!"),r.a.createElement("div",null,t?"Failed to reconnect, please reload the page or try again later.":"We will try again in ".concat(i," seconds.")),c?r.a.createElement(ut.a,{url:it.a,autoLoad:!0,playStatus:ut.a.status.PLAYING}):r.a.createElement("div",null))}var pt=a(317),vt=a(270);function Et(){return(Et=Object(l.a)(i.a.mark((function e(t,a,n,c,o,s){var l,u,d,f;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=(new pt.a).withUrl("".concat(O,"/chat")).build(),u=wt(t)){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,e.next=7,l.start();case 7:return e.next=9,l.invoke("UserWentOfflineOrOnline",!0,u.userId,l.connectionId);case 9:d=u.notificationSettings,f=d.sound,d.connectionChanged&&c(r.a.createElement(gt,{online:!0,sound:f}),"success",3e3),l.onclose((function(){var e=wt(t);if(e){var s=e.notificationSettings,i=s.sound;s.connectionChanged&&c(r.a.createElement(gt,{sound:i,online:!1}),"warning",3e3),bt(0,l,n,c,e.notificationSettings).then((function(){o(-1),a((function(e){var t=Object(m.a)(e);return t.forEach((function(e){e.msg=[],e.lastMessagesAreFetched=!1})),t}))})).catch((function(e){return console.log(e)}))}})),l.on("sendDirectMessage",(function(e,n,i){var l=vt.AES.decrypt(i,vt.enc.Base64.parse(k),{iv:vt.enc.Base64.parse(x)});i=vt.enc.Utf8.stringify(l);var u=wt(t),m=u.notificationSettings,d=m.sound,f=m.newMessageReceived;a((function(t){var a=V(n,t);if(-1!==a&&u.userId!==e){var l=Object.assign([],t);l[a].msg.push(new y({id:1,message:i})),l[a].isOnline=!0,f&&c(r.a.createElement(dt,{sound:d,name:l[a].name,body:z(i,!0)}),"info",5e3);var m,g=l[a];if(l.splice(a,1),l.unshift(g),s((function(e){return m=e,e})),m===n){var h=Ke();(g.msg.length<15||h>55)&&He()}return o(V(m,l)),l}return t}))})),l.on("UserWentOfflineOrOnline",(function(e,t,n){a((function(a){var r=Object.assign([],a);if(t!==u.userId){var o=J(a,n);if(o.found){var s=V(o.id,a);r[s].isOnline=e,!e&&r[s].game&&(c("".concat(r[s].name," went offline! \n YOU WON your game! "),"success",5e3),r[s].game={})}}return r}))})),l.on("UserDataChanged",(function(e,t,n,r){u.userId!==e&&a((function(e){var a=Object(m.a)(e),c=J(e,t);c.found&&(a[V(c.id,e)][n]=r);return a}))})),l.on("getChat",(function(e,n){var o=wt(t);if(u.userId===e){a((function(e){var t=Object.assign([],e);return t.push({id:n.chatId,image:n.image,isOnline:!0,name:n.chatName,msg:[],game:{}}),Object.assign([],t)}));var s=o.notificationSettings,i=s.sound;s.newChatReceived&&c(r.a.createElement(mt,{name:n.chatName,sound:i}),"info",5e3)}})),l.on(Ye[0],(function(e,n,r){var c=wt(t);a((function(t){var a=V(n,t);if(-1!==a&&c.userId!==e){var o=Object.assign([],t);return r.myMark="X",o[a].game=r,o}return t})),He()})),l.on(Ye[1],(function(e,n,r){var o=wt(t);a((function(t){var a=V(n,t);if(-1!==a&&o.userId!==e){var s=Object.assign([],t);return r.surrender?c("YOU WON your game against ".concat(s[a].name,"! "),"success",5e3):c("YOU LOST your game against ".concat(s[a].name,"! "),"error",5e3),s}return t}))})),l.on(Ye[2],(function(e,n,r){var c=wt(t);a((function(t){var a=V(n,t);if(-1!==a&&c.userId!==e){var o=Object.assign([],t),s=o[a].game;return s.board=r.board,s.winner=r.winner,s.currentPlayer=r.currentPlayer,o}return t}))})),e.next=26;break;case 21:e.prev=21,e.t0=e.catch(4),console.log(e.t0),c(r.a.createElement(gt,{online:!1}),"warning",3e3),bt(0,l,n,c,u.notificationSettings);case 26:return e.abrupt("return",l);case 27:case"end":return e.stop()}}),e,null,[[4,21]])})))).apply(this,arguments)}function bt(e,t,a,n,r){return At.apply(this,arguments)}function At(){return(At=Object(l.a)(i.a.mark((function e(t,a,n,c,o){var s,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:3e3,s=o.sound,l=o.connectionChanged,setTimeout((function(){a.start().then((function(){return n(a),l&&c(r.a.createElement(gt,{online:!0,sound:s}),"success",4e3),new Promise((function(e,t){return e(!0)}))})).catch((function(){if(!(t<4))return c(r.a.createElement(ht,{isLast:!0}),"error",7e4),!1;l&&c(r.a.createElement(ht,{sound:s,nextTime:3e3*(t+1)/1e3,isLast:!1}),"warning",3e3*(t+1)),bt(t+1,a,n,c,o)}))}),3e3*t);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wt(e){var t;return e((function(e){return t=e,e})),t}var yt=a(563),Ot=a(310),jt=a(270),kt=r.a.createContext({chatId:null,chatIndex:null,isMobile:!1}),xt=function(e){var t=e.setChats,a=e.setUser,c=Object(n.useContext)(Vt),o=c.user,s=c.chats,i=_()(),l=Object(nt.useToasts)(),g=l.addToast,h=l.removeToast,v=Object(n.useState)(null),b=Object(u.a)(v,2),w=b[0],O=b[1],j=Object(n.useState)(-1),C=Object(u.a)(j,2),N=C[0],S=C[1],I=Object(n.useState)(-1),B=Object(u.a)(I,2),M=B[0],T=B[1],U=Object(n.useState)(null),L=Object(u.a)(U,2),Q=L[0],F=L[1],D=Object(n.useState)(!1),G=Object(u.a)(D,2),q=G[0],P=G[1],Y=Object(n.useState)(!1),W=Object(u.a)(Y,2),R=W[0],H=W[1],K=Object(n.useState)("left"),V=Object(u.a)(K,2),J=V[0],z=V[1],X=Object(yt.a)(["userToken"]),$=Object(u.a)(X,3),ee=($[0],$[1],$[2]);Object(n.useEffect)((function(){(function(e,t,a,n,r,c){return Et.apply(this,arguments)})(a,t,O,te,T,S).then((function(e){return O(e)}))}),[]),Object(n.useEffect)((function(){o||P(!0)}),[i,o]);var te=function(e,t,a){g(e,{appearance:t,autoDismiss:!1},(function(e){a<6e4&&setTimeout((function(){return h(e)}),a)}))},ae=function(e,a,n){w.invoke("ChatWithUserWasCreated",o.userId,e,{chatId:e,chatName:o.userName,image:o.imageUrl}),t((function(t){var r=Object.assign([],t);return r.push({id:e,image:n,name:a,msg:[],game:{}}),r}))},ne=function(e,t){a((function(a){var n=Object(d.a)({},a);switch(e){case"image":n.imageUrl=t;break;case"name":n.userName=t;break;case"notifications":n.notificationSettings=t}return n})),"notifications"!==e&&w.invoke("UserDataChanged",o.userId,e,t),ee("userToken")},re=function(e,a,n){n&&S(e);var r=Object(m.a)(s),c=r[a];if(!c.lastMessagesAreFetched&&c.msg.length>10&&(c.lastMessagesAreFetched=!0),!c.lastMessagesAreFetched||!n&&c.msg.length>10){var i=c.msg.length,l=c.lastMessagesAreFetched,u=document.getElementsByClassName("chat-panel")[0];Z(e,o,c).then((function(e){i!==e.msg.length&&(t(r),l?u.scrollTop=0:He())})).catch((function(e){console.log(e),alert("error loading messages")}))}},ce=function(e,a){var n=a,r=e;return function(e){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],c=jt.AES.encrypt(e,jt.enc.Base64.parse(k),{iv:jt.enc.Base64.parse(x)}).toString();w.invoke("SendDirectMessage",o.userId,r,c,a).catch((function(e){return console.log(e)})),a||(t((function(t){var a=Object.assign([],t),r=a[n];return r.msg.push(new y({id:0,message:e,dateTime:new Date})),a.splice(n,1),a.unshift(r),a})),setTimeout((function(){He()}),20))}},oe=function(e){var t=document.getElementsByTagName("audio")[0];e?t.play():t.pause()},se=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=ce(N,M),n=Boolean(s[M].game.name);(!t||t&&!n)&&a(e,t),t?te(n?r.a.createElement(ft,{failed:!0,sound:o.notificationSettings.sound}):r.a.createElement(ft,{failed:!1,sound:o.notificationSettings.sound}),"info",5e3):T(0)},ie=function(){a(null),w.stop(),O(null),le(),ee("userToken")},le=function(){try{var e=Ot.a.auth2.getAuthInstance();e.signOut().then(e.disconnect())}catch(t){console.log("Not a googler!")}},ue=function(e,t){switch(e){case Ye[1]:t.surrender?te("YOU LOST your game against  ".concat(s[M].name,"! "),"error",5e3):te("YOU WON your game against ".concat(s[M].name,"!"),"success",5e3);break;case Ye[0]:He()}w.invoke(e,o.userId,N,t)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(kt.Provider,{value:{chatId:N,chatIndex:M,isMobile:R}},i.isMobile()?r.a.createElement(p,{setIsMobile:H}):r.a.createElement("div",null),q?r.a.createElement(f.a,{to:"/"}):r.a.createElement("div",{className:"row"},r.a.createElement("audio",{src:function(e){switch(e){case"witcher":return E.a;case"drStone":return A.a;default:return}}(Q),preload:"true",loop:!0}),R?"left"===J?r.a.createElement(je,{LoadTenMessages:re,createNewChat:ae,logout:ie,setChatIndex:function(e){T(e),z("right")},setSong:F,updAudio:oe,UpdateUserData:ne}):r.a.createElement(ot,{InGameAction:ue,setChats:t,LoadTenMessages:re,SendMessage:se,GoBack:z}):r.a.createElement(r.a.Fragment,null,r.a.createElement(je,{LoadTenMessages:re,createNewChat:ae,logout:ie,setChatIndex:T,setSong:F,updAudio:oe,UpdateUserData:ne}),r.a.createElement(ot,{InGameAction:ue,setChats:t,LoadTenMessages:re,SendMessage:se})))))},Ct=a(91),Nt=a(121),St=a(29),It=a(283),Bt=(a(198),a(62)),Mt=a(42),Tt=a(155),Ut=a(313),Lt=a.n(Ut);function Qt(e){var t=e.loginOrRegister,a=Object(n.useState)(""),c=Object(u.a)(a,2),o=c[0],s=c[1],m=Object(n.useState)(""),d=Object(u.a)(m,2),g=d[0],p=d[1],v=Object(n.useState)(""),E=Object(u.a)(v,2),b=E[0],A=E[1],w=Object(n.useState)(!1),y=Object(u.a)(w,2),O=y[0],j=y[1],k=Object(n.useState)(!1),x=Object(u.a)(k,2),C=x[0],N=x[1];function S(){return o.length>0&&b.length>0}var I=function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,M("google",t.tokenId);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function B(){return(B=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,M("login");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e,t){return T.apply(this,arguments)}function T(){return(T=Object(l.a)(i.a.mark((function e(a,n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(!0),setTimeout((function(){return console.log()}),1e3),e.prev=2,r="login"===a?{email:o,password:b}:{token:n},e.next=6,t(r,a);case 6:if("duplicate"!==e.sent){e.next=9;break}throw new Error("Please finish another session before starting a new one.");case 9:N(!0),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),setTimeout((function(){j(!1),e.t0.toString().includes("Failed to fetch")?p("No response from the server"):p(e.t0.message)}),1e3);case 15:case"end":return e.stop()}}),e,null,[[2,12]])})))).apply(this,arguments)}return r.a.createElement(r.a.Fragment,null,C?r.a.createElement(f.a,{to:"/app"}):r.a.createElement(Mt.a,{className:"Login"},r.a.createElement(Mt.a.Header,null," Sign In "),r.a.createElement(Mt.a.Body,null,r.a.createElement("form",{onSubmit:function(e){return B.apply(this,arguments)}},r.a.createElement(re.a,{controlId:"email"},r.a.createElement(Bt.a,null,"Email"),r.a.createElement(It.a,{autoFocus:!0,type:"email",value:o,onChange:function(e){return s(e.target.value)}})),r.a.createElement(re.a,{controlId:"password"},r.a.createElement(Bt.a,null,"Password"),r.a.createElement(It.a,{value:b,onChange:function(e){return A(e.target.value)},type:"password"})),g?r.a.createElement(re.a,null,r.a.createElement("div",{className:"tc dark-red"},g)):r.a.createElement(r.a.Fragment,null),r.a.createElement(re.a,{className:"tc"},r.a.createElement("a",{className:"tc",href:"/rocket-chat-front/#/register"},"Not signed up yet?"),r.a.createElement("div",{style:{marginTop:"15px"}},r.a.createElement(Lt.a,{clientId:"424517305265-0jh85p18hl9f6l17tqbat3ts7bgauc8j.apps.googleusercontent.com",buttonText:"I am real",onSuccess:I,onFailure:function(){p("Failed to login with Google!")},cookiePolicy:"single_host_origin"}))),r.a.createElement(h.a,{block:!0,variant:S()?"primary":"secondary",disabled:!S()||O,type:"submit"},O?r.a.createElement(Tt.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"}):"Login")))))}var Ft=a(156),Dt=a.n(Ft);function Gt(e){var t=e.loginOrRegister,a=Object(n.useState)(""),c=Object(u.a)(a,2),o=c[0],s=c[1],m=Object(n.useState)(""),d=Object(u.a)(m,2),g=d[0],p=d[1],v=Object(n.useState)(""),E=Object(u.a)(v,2),b=E[0],A=E[1],w=Object(n.useState)(!1),y=Object(u.a)(w,2),O=y[0],j=y[1],k=Object(n.useState)(""),x=Object(u.a)(k,2),C=x[0],N=x[1],I=Object(n.useState)(!1),B=Object(u.a)(I,2),M=B[0],T=B[1],U=Object(n.useState)(0),L=Object(u.a)(U,2),Q=L[0],F=L[1];function D(){return o.length>0&&Q>2&&g.length}function G(){return(G=Object(l.a)(i.a.mark((function e(a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),j(!0),setTimeout((function(){return console.log()}),1e3),e.prev=3,e.next=6,t({username:g,email:o,password:b},"register");case 6:return j(!1),e.next=9,Dt()("Almost there","We saved all your data, confirm your email to start using our app!","success");case 9:T(!0),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),setTimeout((function(){j(!1),e.t0.toString().includes("Failed to fetch")?N("No response from the server"):N(e.t0.message)}),500);case 15:case"end":return e.stop()}}),e,null,[[3,12]])})))).apply(this,arguments)}return r.a.createElement(r.a.Fragment,null,M?r.a.createElement(f.a,{to:"/login"}):r.a.createElement(Mt.a,{className:"Login"},r.a.createElement(Mt.a.Header,null," Register "),r.a.createElement(Mt.a.Body,null,r.a.createElement("form",{onSubmit:function(e){return G.apply(this,arguments)}},r.a.createElement(re.a,{controlId:"name"},r.a.createElement(Bt.a,null,"Name"),r.a.createElement(It.a,{autoFocus:!0,type:"text",value:g,onChange:function(e){return p(e.target.value)}})),r.a.createElement(re.a,{controlId:"email"},r.a.createElement(Bt.a,null,"Email"),r.a.createElement(It.a,{autoFocus:!0,type:"email",value:o,onChange:function(e){return s(e.target.value)}})),r.a.createElement(re.a,{controlId:"password"},r.a.createElement(Bt.a,null,"Password"),r.a.createElement(It.a,{style:{borderBottom:"3px solid ".concat(S[Q].color)},value:b,onChange:function(e){var t=0,a=e.target.value;a.length>5&&t++,a.length>7&&t++,a.match(/\d+/g)&&t++,a.toLowerCase()!==a&&t++,F(t),A(a)},type:"password"})),C?r.a.createElement(re.a,null,r.a.createElement("div",{className:"tc dark-red"},C)):r.a.createElement(r.a.Fragment,null),r.a.createElement(h.a,{block:!0,variant:D()?"primary":"secondary",disabled:!D()||O,type:"submit"},O?r.a.createElement(Tt.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"}):"Register")))))}a(526);var qt=a(314),Pt=a.n(qt),Yt=a(315);function Wt(e){var t=e.isFAQ;return r.a.createElement("div",null,r.a.createElement(se.a.Container,{id:"left-tabs-example",defaultActiveKey:t?B[0].question:M[0].version},r.a.createElement(Yt.a,{className:"bg-black-90 align-content-start"},r.a.createElement(le.a,{md:4,lg:4,xl:4,sm:12,xs:12},r.a.createElement(St.a,{variant:"pills",className:"flex-column b--solid b--light-blue"},t?B.map((function(e){return r.a.createElement(St.a.Item,{key:e.question},r.a.createElement(St.a.Link,{eventKey:e.question},e.question))})):M.map((function(e){return r.a.createElement(St.a.Item,{key:e.version},r.a.createElement(St.a.Link,{eventKey:e.version},e.version))})))),r.a.createElement(le.a,{sm:12,xs:12,md:8,xl:8,lg:8},r.a.createElement(se.a.Content,{className:"white ma3"},t?B.map((function(e){return r.a.createElement(se.a.Pane,{eventKey:e.question,key:e.answer},e.answer)})):M.map((function(e){return r.a.createElement(se.a.Pane,{key:e.changes[0],eventKey:e.version},r.a.createElement("ul",null,e.changes.map((function(e){return r.a.createElement("li",{key:e},e)}))))})))))))}function Rt(e){var t=e.success,a=Object(n.useState)({done:!1,time:4}),c=Object(u.a)(a,2),o=c[0],s=c[1];return Object(n.useEffect)((function(){var e=setInterval((function(){var e=Object(d.a)({},o);o.time<2&&(e.done=!0),e.time-=1,s(e)}),1e3);return function(){clearInterval(e)}}),[o]),r.a.createElement(r.a.Fragment,null,o.done?r.a.createElement(f.a,{to:"/login"}):r.a.createElement(Mt.a,{className:"Login"},r.a.createElement(Mt.a.Header,null,"Email verification"),r.a.createElement(Mt.a.Body,null,t?r.a.createElement("div",null,"Your email was verified ",r.a.createElement("span",{className:"green"},"successfully")," :)",r.a.createElement("br",null)," Redirecting you in ",o.time):r.a.createElement("div",null,"Email verification ",r.a.createElement("span",{className:"red"},"failed")," :( ",r.a.createElement("br",null)," Redirecting you in ",o.time," "))))}var Ht=function(e){var t=e.loginOrRegister,a=e.path,c=Object(n.useContext)(Vt).isLoading;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Pt.a,{active:c,spinner:!0,text:"Loading your data"},r.a.createElement("div",{className:"welcome-page overflow-y-auto overflow-x-hidden"},r.a.createElement(Nt.a,{bg:"dark",variant:"dark",expand:"lg"},r.a.createElement(Nt.a.Brand,{href:"/rocket-chat-front/#/login"},"Rocket-Chat ",M[0].version," BETA"),r.a.createElement(Nt.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(Nt.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(St.a,{className:"mr-auto "},r.a.createElement(St.a.Link,{href:"/rocket-chat-front/#/faq"},"FAQ"),r.a.createElement(St.a.Link,{href:"/rocket-chat-front/#/release"},"Release notes")),r.a.createElement(St.a,null,r.a.createElement(St.a.Link,{href:"/rocket-chat-front/#/login"},"Sign in"),r.a.createElement(St.a.Link,{href:"/rocket-chat-front/#/register"},"Register")))),{"/login":r.a.createElement(Qt,{loginOrRegister:t}),"/register":r.a.createElement(Gt,{loginOrRegister:t}),"/faq":r.a.createElement(Wt,{isFAQ:!0}),"/release":r.a.createElement(Wt,{isFAQ:!1}),"/vsuccess":r.a.createElement(Rt,{success:!0}),"/vfailed":r.a.createElement(Rt,{success:!1})}[a],"/login"===a||"/register"===a?r.a.createElement("img",{src:"https://dramarocket.com/wp-content/uploads/2018/01/icon-redrocket-2.png",alt:"logo",className:"center"}):r.a.createElement("div",null))))},Kt=function(e){try{return U.a.verify(e,j)}catch(t){throw t}},Vt=r.a.createContext({user:{},chats:[],isLoading:!1});var Zt=function(){var e=Object(n.useState)(null),t=Object(u.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)([]),s=Object(u.a)(o,2),m=s[0],d=s[1],g=Object(yt.a)(["userToken"]),h=Object(u.a)(g,3),p=h[0],v=h[1],E=(h[2],Object(n.useState)(!1)),b=Object(u.a)(E,2),A=b[0],w=b[1],y=Object(n.useState)(!1),O=Object(u.a)(y,2),j=O[0],k=O[1];function x(e){return C.apply(this,arguments)}function C(){return(C=Object(l.a)(i.a.mark((function e(t){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L(t);case 3:return a=e.sent,n=K(a,t),d(n),e.abrupt("return","ok");case 9:e.prev=9,e.t0=e.catch(0),alert("error loading chats");case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function N(e){return S.apply(this,arguments)}function S(){return(S=Object(l.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(a=Kt(t)).notificationSettings=JSON.parse(a.notificationSettings),a.isOnline="true"===a.isOnline,a.userId=parseInt(a.userId),a.isOnline,c(a),w(!0),e.next=10,x(a.userId);case 10:return w(!1),e.abrupt("return",a);case 14:throw e.prev=14,e.t0=e.catch(0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}function B(e,t){return M.apply(this,arguments)}function M(){return(M=Object(l.a)(i.a.mark((function e(t,a){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,G(t,a);case 3:if(!(n=e.sent)){e.next=10;break}if(!n.text){e.next=7;break}return e.abrupt("return",n.text);case 7:return v("userToken",n.userToken,{maxAge:86400}),e.next=10,N(n.userToken);case 10:return e.abrupt("return","ok");case 13:throw e.prev=13,e.t0=e.catch(0),console.log(e.t0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}return Object(n.useEffect)((function(){N(p.userToken).then((function(e){c(e),k(!0)})).catch((function(){return console.log("No cookie :(")}))}),[]),r.a.createElement(nt.ToastProvider,null,r.a.createElement(Ct.a,{className:"rocket"},r.a.createElement(f.d,null,r.a.createElement(f.b,{path:"/app"},r.a.createElement(Vt.Provider,{value:{user:a,chats:m,isLoading:A}},r.a.createElement(xt,{setUser:c,setChats:d}))),I.map((function(e){return r.a.createElement(f.b,{path:e,key:e},r.a.createElement(Vt.Provider,{value:{user:a,chats:m,isLoading:A}},r.a.createElement(Ht,{path:e})))})),r.a.createElement(f.b,{path:"/register"},r.a.createElement(Vt.Provider,{value:{user:a,chats:m,isLoading:A}},r.a.createElement(Ht,{path:"/register",loginOrRegister:B}))),r.a.createElement(f.b,null,r.a.createElement(Vt.Provider,{value:{user:a,chats:m,isLoading:A}},r.a.createElement(Ht,{path:"/login",loginOrRegister:B})))),j?r.a.createElement(f.a,{to:"/app"}):r.a.createElement("div",null)))},Jt=(a(536),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function zt(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(Dt()("New update!","Rocket chat ".concat(M[0].version," was downloaded, close all tabs to update!"),"success"),console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}o.a.render(r.a.createElement(Zt,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/rocket-chat-front",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/rocket-chat-front","/service-worker.js");Jt?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):zt(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):zt(t,e)}))}}()},99:function(e,t,a){e.exports=a.p+"static/media/notification.56a9110c.mp3"}},[[323,1,2]]]);
//# sourceMappingURL=main.34f03171.chunk.js.map