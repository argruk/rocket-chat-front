(this["webpackJsonprocket-chat-front"]=this["webpackJsonprocket-chat-front"]||[]).push([[0],{100:function(e,t,a){e.exports=a.p+"static/media/notification.56a9110c.mp3"},164:function(e,t,a){},170:function(e,t,a){},234:function(e,t,a){e.exports=a.p+"static/media/lol.f8b7a2e4.mp3"},235:function(e,t,a){e.exports=a.p+"static/media/dr_stone_ending.470614e2.mp3"},263:function(e,t,a){e.exports=a(438)},268:function(e,t,a){},280:function(e,t){},282:function(e,t){},318:function(e,t){},319:function(e,t){},392:function(e,t,a){},395:function(e,t,a){},426:function(e,t,a){},438:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(20),o=a.n(c),s=(a(268),a(269),a(9)),l=a.n(s),i=a(16),u=a(8),m=a(74),d=a(83),f=a(62),h=a(36),p=a(25);function g(e){var t=e.setIsMobile,a=Object(n.useState)(!0),c=Object(u.a)(a,2),o=c[0],s=c[1],l=function(e){t(e),s(!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{show:o,onHide:function(){return s(!1)},centered:!0},r.a.createElement(h.a.Body,{closebutton:"true",className:"tc"},r.a.createElement("h3",null,"Swtich to mobile version"),r.a.createElement("div",null,r.a.createElement(p.a,{variant:"primary",onClick:function(){return l(!0)}},"Yes"),r.a.createElement(p.a,{style:{marginLeft:"10%"},variant:"secondary",onClick:function(){return l(!1)}},"No")))))}a(170);var v=a(234),E=a.n(v),b=a(235),y=a.n(b),w=a(47),O="https://rocket-chat-api.azurewebsites.net/",k="8G08T5AVQmeuECTfQCSY01ayQ7Dov4eD+reNumjCNtI=",j="pw7I2NywUBxIZQYAjenxWQ==",x=["Audio","Add Contact","My Account","Logout"],C=["witcher","drStone"],S=[{str:"weak",color:"red"},{str:"weakish",color:"darkorange"},{str:"medium",color:"#E1CB0C"},{str:"okay",color:"springgreen"},{str:"strong",color:"green"}],N=["/faq","/release","/vsuccess","/vfailed"],I=[{question:"Q: What do I do here?",answer:"A: You send messages to other people, could you imagine!!!"},{question:"Q: How to get started?",answer:"A: Please register, then add other people and talk to them as much as you want. Please mind the warning above when you submit any data."},{question:"Q: Who are the creators of this miracle?",answer:"A: Bohdan Boss and Artem Daddy :))"},{question:"Q: What are future plans for this project?",answer:"A: Show WhatsApp and Telegram how to make good apps..."},{question:"Q: Why can I not send emoji without text on PC?",answer:"A: This is a known issue and might be fixed later, hold tight!"},{question:"Q: Are my messages 100% secure?",answer:"A: Let's say sending credit card details is not a good idea, but gossips are totally fine."},{question:"Q: How can I suggest improvements?",answer:"A: Just start a chat with one of the Creators and show us your ideas."},{question:"Q: Lorem Ipsum?",answer:"A: Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."}],A=[{version:"v0.3",changes:["Security updates","Notification settings","More efficient live communication","Email verification","Login with Google","Bugfixes and other minor improvements","Semi-advanced security for messages","Added cookies support"]},{version:"v0.2.1",changes:["Bugfixes and UI improvements"]},{version:"v0.2",changes:["Chats are sorted based on last message","Automatic reconnection in case of disconnect","Online/Offline status of users with notifications","Account settings with live update","Emoji for desktop users","Bugfixes and other minor improvements"]},{version:"v0.1",changes:["Registration/Login","Live messages","Message history is saved and is reloaded on login","Can add others to contact list","Audio settings"]}],U=a(63),L=a.n(U);function M(e){return B.apply(this,arguments)}function B(){return(B=Object(i.a)(l.a.mark((function e(t){var a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=L.a.sign({userId:t},"4E576FBDECBE1"),e.next=4,fetch("".concat(O,"/api/getallchats"),{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({token:a})});case 4:return n=e.sent,e.next=7,n.json();case 7:return n=e.sent,e.abrupt("return",n);case 11:throw e.prev=11,e.t0=e.catch(0),e.t0;case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function F(e,t,a){return T.apply(this,arguments)}function T(){return(T=Object(i.a)(l.a.mark((function e(t,a,n){var r,c,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],e.prev=1,c=L.a.sign({chatId:t,totalMessages:n},"4E576FBDECBE1"),e.next=5,fetch("".concat(O,"/api/getlastmessages"),{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({token:c})});case 5:return o=e.sent,e.next=8,o.json();case 8:return o=e.sent,e.next=11,o.forEach((function(e){var t=e.userId===a.userId?0:1;r.push(new w.Message({id:t,message:e.messageText}))}));case 11:return e.abrupt("return",r);case 14:throw e.prev=14,e.t0=e.catch(1),e.t0;case 17:case"end":return e.stop()}}),e,null,[[1,14]])})))).apply(this,arguments)}function D(e,t){return q.apply(this,arguments)}function q(){return(q=Object(i.a)(l.a.mark((function e(t,a){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(O,"/api/").concat(a),{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify(t)});case 3:return n=e.sent,r=n.status,e.next=7,n.json();case 7:return n=e.sent,Q(r,n.text),e.abrupt("return",n);case 12:throw e.prev=12,e.t0=e.catch(0),e.t0;case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}function P(){return(P=Object(i.a)(l.a.mark((function e(t,a){var n,r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log(O),n=L.a.sign({userId:t,emailToAdd:a},"4E576FBDECBE1"),e.next=5,fetch("".concat(O,"/api/addchat"),{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({token:n})});case 5:return r=e.sent,c=r.status,e.next=9,r.json();case 9:return r=e.sent,Q(c,r.text),e.abrupt("return",r);case 14:throw e.prev=14,e.t0=e.catch(0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}function R(){return(R=Object(i.a)(l.a.mark((function e(t,a,n,r,c){var o,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o=L.a.sign({userId:t,sound:a,newchat:n,newmessage:r,connection:c},"4E576FBDECBE1"),e.next=4,fetch("".concat(O,"/api/settingsapply"),{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({token:o})});case 4:return s=e.sent,Q(s.status,s.text),e.abrupt("return","ok");case 10:throw e.prev=10,e.t0=e.catch(0),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function W(e){return H.apply(this,arguments)}function H(){return(H=Object(i.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=L.a.sign({userId:t},"4E576FBDECBE1"),e.next=3,fetch("".concat(O,"/api/disconnect"),{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({token:a})});case 3:404===e.sent.status&&console.log("Couldnt find a user");case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(e,t){switch(e){case 400:throw new Error(t);case 500:case 404:throw new Error("Server error,try again later")}}function Y(e,t){var a=[];return e.forEach((function(e){var n,r;e.lastMessage?(n=e.lastMessage.userId===t?0:1,r={id:e.chatId,image:e.friendImageUrl,isOnline:e.isOnline,lastMessagesAreFetched:!1,name:e.friendUserName,msg:[new w.Message({id:n,message:e.lastMessage.messageText})]}):r={id:e.chatId,image:e.friendImageUrl,isOnline:e.isOnline,lastMessagesAreFetched:!1,name:e.friendUserName,msg:[]},a.push(r)})),a}var G=function(e,t){var a=0,n=!0,r=!1,c=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){if(o.value.id===e)return a;a++}}catch(l){r=!0,c=l}finally{try{n||null==s.return||s.return()}finally{if(r)throw c}}return-1},z=function(){var e=Object(i.a)(l.a.mark((function e(t,a,n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F(t,a,n.msg.length);case 3:return r=e.sent,n.msg.forEach((function(e){r.push(e)})),n.lastMessagesAreFetched=!0,n.msg=[],n.msg=Object(m.a)(r),e.abrupt("return",n);case 11:throw e.prev=11,e.t0=e.catch(0),e.t0;case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,a,n){return e.apply(this,arguments)}}(),J=function(e,t){var a={},n={found:!1};e.forEach((function(e){var t=e.id;a[t]=1}));var r=!0,c=!1,o=void 0;try{for(var s,l=t[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var i=s.value;if(i in a){n.found=!0,n.id=i;break}}}catch(u){c=!0,o=u}finally{try{r||null==l.return||l.return()}finally{if(c)throw o}}return n},K=a(236),_=a.n(K),Z=a(44),V=a(261),$=a(97);var X=function(e){var t=e.show,a=e.handleClose,c=e.updateAudio,o=e.chooseSong,s=Object(n.useState)(0),l=Object(u.a)(s,2),i=l[0],m=l[1],d=Object(n.useState)(""),f=Object(u.a)(d,2),p=f[0],g=f[1],v=function(e){return e?"primary":"secondary"};return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{show:t,onHide:a,centered:!0},r.a.createElement(h.a.Body,null,r.a.createElement("h3",null,"Audio settings"),r.a.createElement("h5",null,"Current song"),r.a.createElement(Z.a,null,r.a.createElement(Z.a.Toggle,{variant:"success",id:"dropdown-basic"},p?r.a.createElement(r.a.Fragment,null,p):r.a.createElement(r.a.Fragment,null,"Choose song ")),r.a.createElement(Z.a.Menu,null,C.map((function(e){return r.a.createElement(Z.a.Item,{key:e,onClick:function(){return function(e){m(0),o(e),g(e)}(e)}},e)})))),r.a.createElement("h4",null," Playback "),r.a.createElement(V.a,{type:"radio",name:"options",value:i,onChange:function(e){m(e),e&&p?c(!0):e||c(!1)}},r.a.createElement($.a,{variant:v(Boolean(i)),value:1},"On"),r.a.createElement($.a,{variant:v(!Boolean(i)),value:0},"Off")))))},ee=a(56),te=a(237);var ae=function(e){var t=e.show,a=e.handleClose,c=e.createNewChat,o=Object(n.useState)(""),s=Object(u.a)(o,2),l=s[0],i=s[1],m=Object(n.useState)(""),d=Object(u.a)(m,2),f=d[0],g=d[1],v=Object(n.useContext)(dt).user,E=v?v.userId:0;return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{show:t,onHide:a,centered:!0},r.a.createElement(h.a.Body,null,r.a.createElement("h3",null,"Add contact "),r.a.createElement(ee.a,{onSubmit:function(e){e.preventDefault(),function(e,t){return P.apply(this,arguments)}(E,l).then((function(e){if(e){var t=e.chatId,n=e.userName,r=e.friendImageUrl;c(t,n,r),a()}})).catch((function(e){e.toString().includes("Failed to fetch")?g("No response from the server"):g(e.message)}))}},r.a.createElement(ee.a.Group,{controlId:"formBasicEmail"},r.a.createElement(ee.a.Label,null,"Email address"),r.a.createElement(ee.a.Control,{type:"email",placeholder:"Enter email",onChange:function(e){return i(e.target.value)}}),r.a.createElement(ee.a.Text,{className:"text-muted"},"Ask creators about their current emails.")),f?r.a.createElement(te.a,null,r.a.createElement("div",{className:"dark-red"},f)):r.a.createElement(r.a.Fragment,null),r.a.createElement(p.a,{variant:"primary",type:"submit",disabled:!(l.length>0)},"Add friend")))))},ne=a(136),re=a(55),ce=a(241),oe=a(61),se=a(82),le=a(239),ie=a.n(le);var ue=function(e){var t=e.type,a=e.UpdateUserData,c=Object(n.useState)(""),o=Object(u.a)(c,2),s=o[0],l=o[1],i=Object(n.useState)({show:!1,type:""}),m=Object(u.a)(i,2),d=m[0],f=m[1];function h(){return s.length>2}return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var n={type:t,value:s};"image"!==t||ie()(s)?(a(n.type,n.value),f({show:!0,type:"success"})):f({show:!0,type:"danger"}),l("")}},r.a.createElement(ee.a.Row,null,r.a.createElement(oe.a,null,r.a.createElement(ee.a.Control,{placeholder:"new "+t,value:s,onChange:function(e){return l(e.target.value)}})),r.a.createElement(oe.a,null,r.a.createElement(p.a,{type:"submit",variant:h()?"primary":"secondary",disabled:!h()}," Update!")),d.show?r.a.createElement(se.a,{variant:d.type,onClose:function(){return f({show:!1,type:""})},dismissible:!0,className:"ma2"},"danger"===d.type?"Your ".concat(t," change failed with many errors!"):"Your "+t+" was changed successfully!"):r.a.createElement("div",null))))},me=a(240),de=a.n(me);var fe=function(e){var t=e.name,a=e.activeSwitches,c=e.handleChange,o=Object(n.useState)(""),s=Object(u.a)(o,2),l=s[0],i=s[1];Object(n.useEffect)((function(){var e=t.match(/([A-Z]?[^A-Z]*)/g).slice(0,-1),a="";if(e){var n=!0,r=!1,c=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var l=o.value;a+=" "+(l=m(l))}}catch(u){r=!0,c=u}finally{try{n||null==s.return||s.return()}finally{if(r)throw c}}}else a=t=m(t);i(a)}));var m=function(e){var t=e.charAt(0);return t===t.toLowerCase()&&t!==t.toUpperCase()?t.toUpperCase()+e.substring(1):e};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"col-8",style:{marginRight:"5px"}},l),r.a.createElement("div",{className:"col-2"},r.a.createElement("label",null,r.a.createElement(de.a,{onChange:function(){return c(t)},checked:Boolean(a[t]),onColor:"#86d3ff",onHandleColor:"#2693e6",handleDiameter:30,uncheckedIcon:!1,checkedIcon:!1,boxShadow:"0px 1px 5px rgba(0, 0, 0, 0.6)",activeBoxShadow:"0px 0px 1px 10px rgba(0, 0, 0, 0.2)",height:20,width:48}))))};var he=function(e){var t=e.UpdateUserData,a=(e.handleClose,Object(n.useContext)(dt).user),c=Object(n.useState)(a.notificationSettings),o=Object(u.a)(c,2),s=o[0],l=o[1],i=Object(n.useState)({show:!1,type:""}),m=Object(u.a)(i,2),f=m[0],h=m[1];function g(e){var t=Object(d.a)({},s);t[e]=!t[e],l(t)}return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t("notifications",s);var n=s.sound,r=s.newChatReceived,c=s.newMessageReceived,o=s.connectionChanged;(function(e,t,a,n,r){return R.apply(this,arguments)})(a.userId,n,r,c,o).then((function(){return h({show:!0,type:"success"})})).catch((function(e){h({show:!0,type:"danger"}),console.log(e)}))}},r.a.createElement("label",null,r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row h-auto",style:{alignContent:"start"}},Object.keys(s).map((function(e,t){return 0===t?r.a.createElement("div",{key:e}):r.a.createElement(fe,{handleChange:g,activeSwitches:s,name:e,key:e})}))))),r.a.createElement("br",null),f.show?r.a.createElement(se.a,{variant:f.type,onClose:function(){return h({show:!1,type:""})},dismissible:!0,className:"ma2"},"danger"===f.type?"Failed to save notification settings!":"Notification settings changed successfully!"):r.a.createElement("div",null),r.a.createElement("br",null)," ",r.a.createElement(p.a,{type:"submit"}," Save ")))};var pe=function(e){var t=e.show,a=e.handleClose,c=e.UpdateUserData,o=Object(n.useContext)(dt).user;return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{show:t,onHide:a,centered:!0},r.a.createElement(h.a.Body,null,r.a.createElement("h3",null,"My Account"),r.a.createElement(ce.a,{defaultActiveKey:"Picture",id:"uncontrolled-tab-example"},r.a.createElement(re.a,{eventKey:"Picture",title:"Picture"},o.imageUrl?r.a.createElement(ne.a,null,r.a.createElement(ne.a.Image,{roundedCircle:!0,width:100,height:120,alt:"profile picc",src:o.imageUrl}),r.a.createElement(ne.a.Caption,null,"Your profile picture."),r.a.createElement("div",null,r.a.createElement(ue,{UpdateUserData:c,type:"image"}))):r.a.createElement("span",{className:"ma2"}," You have no pic",r.a.createElement("div",null,r.a.createElement(ue,{UpdateUserData:c,type:"image"})))),r.a.createElement(re.a,{eventKey:"Name",title:"Name"},r.a.createElement("div",{className:"ma2 "},r.a.createElement("h6",null,"Your current name is ",r.a.createElement("strong",null,o.userName)),r.a.createElement(ue,{UpdateUserData:c,type:"name"}))),r.a.createElement(re.a,{eventKey:"Notifications",title:"Notifications"},r.a.createElement("div",{className:"ma2 "},r.a.createElement(he,{UpdateUserData:c})))),r.a.createElement(p.a,{style:{float:"right"},onClick:function(){return a()}},"Close"))))};var ge=function(e){var t=e.updateAudio,a=e.logout,c=e.chooseSong,o=e.createNewChat,s=e.UpdateUserData,l=Object(n.useState)({type:"",seen:!1}),i=Object(u.a)(l,2),m=i[0],d=i[1],f=function(){return d({type:"",seen:!1})};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Z.a,null,r.a.createElement(Z.a.Toggle,{variant:"secondary",size:"sm",id:"dropdown-basic"},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},r.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}))),r.a.createElement(Z.a.Menu,null,x.map((function(e,t){return"Logout"===e?r.a.createElement(Z.a.Item,{key:e,onClick:a},x[t]):r.a.createElement(Z.a.Item,{key:e,onClick:function(){return e=x[t],d({type:e,seen:!0});var e}},x[t]," ")})))),{"Add Contact":r.a.createElement(ae,{show:m.seen,handleClose:f,createNewChat:o}),Audio:r.a.createElement(X,{show:m.seen,handleClose:f,updateAudio:t,chooseSong:c}),"My Account":r.a.createElement(pe,{show:m.seen,handleClose:f,UpdateUserData:s}),Logout:r.a.createElement(r.a.Fragment,null)}[m.type])},ve=(a(392),a(19));a(394);var Ee=function(e){var t=e.clickOnChat,a=e.setChatIndex,c=Object(n.useContext)(dt).chats,o=Object(n.useContext)(We),s=o.chatIndex,l=o.isMobile,i={margin:"2px",backgroundColor:"#383838",color:"white"},u={margin:"0px ",marginBottom:"5px ",marginTop:"5px ",backgroundColor:"black",color:"white"};return r.a.createElement(ve.m,null,r.a.createElement(ve.c,{className:"scrollable"},c.map((function(e,n){return r.a.createElement("div",{onClick:function(){return function(e,n){t(e,n,!0),a(n)}(e.id,n)},key:e.id},r.a.createElement(ve.d,{style:n!==s||l?i:u},e.image?r.a.createElement(ve.b,{imgUrl:e.image}):r.a.createElement(ve.b,{letter:e.name.charAt(0),style:{color:"black !important"}}),r.a.createElement(ve.e,null,r.a.createElement(ve.h,{justify:!0},r.a.createElement(ve.n,{ellipsis:!0},e.name),r.a.createElement(ve.j,null,e.isOnline?r.a.createElement("status-indicator",{active:!0}):r.a.createElement("div",null))),r.a.createElement(ve.j,{ellipsis:!0},e.msg.length>0?e.msg[e.msg.length-1].message:"Say something"))))}))))};function be(e){var t=e.createNewChat,a=e.LoadTenMessages,c=e.updAudio,o=e.setSong,s=e.logout,l=e.setChatIndex,i=e.UpdateUserData,u=Object(n.useContext)(We).isMobile;return r.a.createElement("div",{className:u?"left-side col-12":"left-side col-4 col-sm-4 col-md-4 col-lg-2 col-xl-2"},r.a.createElement(ge,{createNewChat:t,updateAudio:c,chooseSong:o,logout:function(){return s()},UpdateUserData:i}),r.a.createElement(Ee,{clickOnChat:a,setChatIndex:l}))}var ye=a(260),we=a(259),Oe=a(249),ke=a.n(Oe);var je=function(e){var t=e.onSendClick,a=Object(n.useContext)(We).isMobile,c=r.a.createElement(we.a,{id:"popover-basic"},r.a.createElement(ke.a,{onEmojiClick:function(e,t){document.querySelector(".lc-1pj3shq").value+=t.emoji}}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(ve.m,null,r.a.createElement(ve.k,{onSend:function(){var e;e=document.querySelector(".lc-1pj3shq").value,t(e)},onChange:function(e){"change"===e.type&&(document.querySelector(".lc-1pj3shq").value+=e.type.value)}},r.a.createElement(ve.h,{align:"center"},r.a.createElement(ve.g,{fit:!0},r.a.createElement("label",{htmlFor:"file-upload",className:"custom-file-upload"},r.a.createElement("input",{type:"file",style:{display:"none"}})),r.a.createElement(ve.a,null)),r.a.createElement(ve.l,{fill:"true"}),r.a.createElement(ve.i,{fit:!0})),a?r.a.createElement("div",{style:{height:"45px"}}):r.a.createElement(ve.h,{verticalAlign:"center",justify:"left"},r.a.createElement(ye.a,{trigger:"click",placement:"top",overlay:c},r.a.createElement(ve.g,{fit:!0},r.a.createElement(ve.f,{onClick:function(){}})))))))};a(395);var xe=function(e){var t=e.chatData,a=e.onSend,c=e.loadTen,o=e.GoBack,s=Object(n.useContext)(We),l=s.chatId,i=s.chatIndex,u=s.isMobile,m=function(e){c(l,i,!1)};return r.a.createElement("div",{id:"chat-side"},u?r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row header"},r.a.createElement(p.a,{type:"button",variant:"secondary",className:"col-2 arrow-back ",onClick:function(){return o("left")}},r.a.createElement("span",{className:"btn-label"},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},r.a.createElement("path",{fill:"none",d:"M0 0h24v24H0V0z"}),r.a.createElement("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"}))),"Back"),r.a.createElement("div",{className:"white tc col-10",style:{backgroundColor:"#6c757d"}},r.a.createElement("strong",{className:"black"},t.name)," is",r.a.createElement("span",{className:t.isOnline?"dark-blue":"white"}," ",t.isOnline?" online":" offline"),r.a.createElement("h5",{className:"hover-bg-white-40 pointer",onClick:m},"Load more messages")))):r.a.createElement("h4",{className:"white tc hover-bg-white-40 pointer col-10",onClick:m},"Load more"),r.a.createElement(w.ChatFeed,{ClassName:"feed",showSenderName:!0,messages:t.msg}),r.a.createElement("footer",{className:"footer"},r.a.createElement(je,{onSendClick:a})))};function Ce(e){var t=e.LoadTenMessages,a=e.SendMessage,c=e.GoBack,o=Object(n.useContext)(dt).chats,s=Object(n.useContext)(We),l=s.chatIndex,i=s.isMobile;return r.a.createElement("div",{className:i?"right-side col-12":"right-side col-8 col-sm-8 col-md-8 col-lg-10 col-xl-10 "},r.a.createElement("div",{className:"overflow-hidden"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},-1===l?r.a.createElement("div",{className:"tc center col align-self-center",id:"idle-msg"},"Click on a chat to start messaging!"):r.a.createElement("div",{className:"col"},r.a.createElement(xe,{loadTen:t,chatData:o[l],onSend:a,GoBack:c}))))))}var Se=a(258),Ne=a(100),Ie=a.n(Ne),Ae=a(57),Ue=a.n(Ae);function Le(e){var t=e.name,a=e.sound;return r.a.createElement("div",null,r.a.createElement("strong",null,"New chat!"),r.a.createElement("div",null,r.a.createElement("strong",null,t)," created a chat with you!"),a?r.a.createElement(Ue.a,{url:Ie.a,autoLoad:!0,playStatus:Ue.a.status.PLAYING}):r.a.createElement("div",null))}function Me(e){var t=e.name,a=e.body,n=e.sound;return r.a.createElement("div",null,r.a.createElement("strong",null,t),r.a.createElement("div",null,a),n?r.a.createElement(Ue.a,{url:Ie.a,autoLoad:!0,playStatus:Ue.a.status.PLAYING}):r.a.createElement("div",null))}function Be(e){var t=e.online,a=e.sound;return r.a.createElement("div",null,r.a.createElement("strong",null,"Connection status changed!"),r.a.createElement("div",null,t?"You are online now":"You went offline, your messages will not be sent!"),t?r.a.createElement("div",null):r.a.createElement("div",null,"We will try to reconnect you!"),a?r.a.createElement(Ue.a,{url:Ie.a,autoLoad:!0,playStatus:Ue.a.status.PLAYING}):r.a.createElement("div",null))}function Fe(e){var t=e.isLast,a=e.nextTime,c=e.sound,o=Object(n.useState)(a),s=Object(u.a)(o,2),l=s[0],i=s[1];return Object(n.useEffect)((function(){var e=setInterval((function(){return i(l-1)}),1e3);return function(){clearInterval(e)}}),[l]),r.a.createElement("div",null,r.a.createElement("strong",null,"Reconnection failed!"),r.a.createElement("div",null,t?"Failed to reconnect, please reload the page or try again later.":"We will try again in ".concat(l," seconds.")),c?r.a.createElement(Ue.a,{url:Ie.a,autoLoad:!0,playStatus:Ue.a.status.PLAYING}):r.a.createElement("div",null))}var Te=a(224);function De(){return(De=Object(i.a)(l.a.mark((function e(t,a,n,c,o,s){var i,u,d,f;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=(new Se.a).withUrl("".concat(O,"/chat")).build(),t((function(e){return u=e,e})),u){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,e.next=7,i.start();case 7:return e.next=9,i.invoke("UserWentOfflineOrOnline",!0,u.userId);case 9:d=u.notificationSettings,f=d.sound,d.connectionChanged&&c(r.a.createElement(Be,{online:!0,sound:f}),"success",3e3),i.onclose((function(){var e;if(W(u.userId),t((function(t){return e=t,t})),e){var s=e.notificationSettings,l=s.sound;s.connectionChanged&&c(r.a.createElement(Be,{sound:l,online:!1}),"warning",3e3),qe(0,i,n,c).then((function(){o(-1),a((function(e){var t=Object(m.a)(e);return t.forEach((function(e){e.msg=[],e.lastMessagesAreFetched=!1})),t}))})).catch((function(e){return console.log(e)}))}})),i.on("sendDirectMessage",(function(e,n,l){var i,u=Te.AES.decrypt(l,Te.enc.Base64.parse(k),{iv:Te.enc.Base64.parse(j)});l=Te.enc.Utf8.stringify(u),t((function(e){return i=e,e}));var m=i.notificationSettings,d=m.sound,f=m.newMessageReceived;a((function(t){var a=G(n,t);if(-1!==a&&i.userId!==e){var u=Object.assign([],t);u[a].msg.push(new w.Message({id:1,message:l})),u[a].isOnline=!0,f&&c(r.a.createElement(Me,{sound:d,name:u[a].name,body:l}),"info",5e3);var m,h=u[a];return u.splice(a,1),u.unshift(h),s((function(e){return m=e,e})),o((function(){return G(m,u)})),u}return t}))})),i.on("UserWentOfflineOrOnline",(function(e,t,n){a((function(a){var r=Object.assign([],a);if(t!==u.userId){var c=J(a,n);if(c.found)r[G(c.id,a)].isOnline=e}return r}))})),i.on("UserDataChanged",(function(e,t,n,r){u.userId!==e&&a((function(e){var a=Object(m.a)(e),c=J(e,t);c.found&&(a[G(c.id,e)][n]=r);return a}))})),i.on("getChat",(function(e,n){var o;if(t((function(e){return o=e,e})),u.userId===e){a((function(e){var t=Object.assign([],e);return t.push({id:n.chatId,image:n.image,isOnline:!0,name:n.chatName,msg:[]}),Object.assign([],t)}));var s=o.notificationSettings,l=s.sound;s.newChatReceived&&c(r.a.createElement(Le,{name:n.chatName,sound:l}),"info",5e3)}})),e.next=23;break;case 18:e.prev=18,e.t0=e.catch(4),console.log(e.t0),c(r.a.createElement(Be,{online:!1}),"warning",3e3),qe(0,i,n,c,u.notificationSettings);case 23:return e.abrupt("return",i);case 24:case"end":return e.stop()}}),e,null,[[4,18]])})))).apply(this,arguments)}function qe(e,t,a,n,r){return Pe.apply(this,arguments)}function Pe(){return(Pe=Object(i.a)(l.a.mark((function e(t,a,n,c,o){var s,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:3e3,s=o.sound,i=o.connectionChanged,setTimeout((function(){a.start().then((function(){return n(a),i&&c(r.a.createElement(Be,{online:!0,sound:s}),"success",4e3),new Promise((function(e,t){return e(!0)}))})).catch((function(){if(!(t<4))return c(r.a.createElement(Fe,{isLast:!0}),"error",7e4),!1;i&&c(r.a.createElement(Fe,{sound:s,nextTime:3e3*(t+1)/1e3,isLast:!1}),"warning",3e3*(t+1)),qe(t+1,a,n,c)}))}),3e3*t);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Re=a(128),We=r.a.createContext({chatId:null,chatIndex:null,isMobile:!1}),He=function(e){var t=e.setChats,a=e.SendMessage,c=e.logout,o=e.createNewChat,s=e.setUser,l=e.setHubConnection,i=Object(n.useContext)(dt),h=i.user,p=i.chats,v=_()(),b=Object(Re.useToasts)(),w=b.addToast,O=b.removeToast,k=Object(n.useState)(-1),j=Object(u.a)(k,2),x=j[0],C=j[1],S=Object(n.useState)(-1),N=Object(u.a)(S,2),I=N[0],A=N[1],U=Object(n.useState)(null),L=Object(u.a)(U,2),M=L[0],B=L[1],F=Object(n.useState)(!1),T=Object(u.a)(F,2),D=T[0],q=T[1],P=Object(n.useState)(!1),R=Object(u.a)(P,2),W=R[0],H=R[1],Q=Object(n.useState)("left"),Y=Object(u.a)(Q,2),G=Y[0],J=Y[1];Object(n.useEffect)((function(){(function(e,t,a,n,r,c){return De.apply(this,arguments)})(s,t,l,K,A,C).then((function(e){l(e)}))}),[]);var K=function(e,t,a){w(e,{appearance:t,autoDismiss:!1},(function(e){a<6e4&&setTimeout((function(){return O(e)}),a)}))},Z=function(e,t){var a;l((function(e){return a=e,e})),s((function(a){var n=Object(d.a)({},a);switch(e){case"image":n.imageUrl=t;break;case"name":n.userName=t;break;case"notifications":n.notificationSettings=t}return n})),"notifications"!==e&&a.invoke("UserDataChanged",h.userId,e,t)},V=function(e,a,n){n&&C(e);var r=Object(m.a)(p),c=r[a];if(!c.lastMessagesAreFetched&&c.msg.length>10&&(c.lastMessagesAreFetched=!0),!c.lastMessagesAreFetched||!n&&c.msg.length>10){var o=c.msg.length;z(e,h,c).then((function(e){o!==e.msg.length&&(t(r),document.getElementsByClassName("chat-history")[0].scrollTop=0)})).catch((function(e){console.log(e),alert("error loading messages")}))}},$=function(e){var t=document.getElementsByTagName("audio")[0];e?t.play():t.pause()},X=function(e){a(x,I)(e),A(0)};return Object(n.useEffect)((function(){h||q(!0)}),[v,h]),r.a.createElement(r.a.Fragment,null,r.a.createElement(We.Provider,{value:{chatId:x,chatIndex:I,isMobile:W}},v.isMobile()?r.a.createElement(g,{setIsMobile:H}):r.a.createElement("div",null),D?r.a.createElement(f.a,{to:"/"}):r.a.createElement("div",{className:"row"},r.a.createElement("audio",{src:function(e){switch(e){case"witcher":return E.a;case"drStone":return y.a;default:return}}(M),preload:"true",loop:!0}),W?"left"===G?r.a.createElement(be,{LoadTenMessages:V,createNewChat:o,logout:c,setChatIndex:function(e){A(e),J("right")},setSong:B,updAudio:$,UpdateUserData:Z}):r.a.createElement(Ce,{LoadTenMessages:V,SendMessage:X,GoBack:J}):r.a.createElement(r.a.Fragment,null,r.a.createElement(be,{LoadTenMessages:V,createNewChat:o,logout:c,setChatIndex:A,setSong:B,updAudio:$,UpdateUserData:Z}),r.a.createElement(Ce,{LoadTenMessages:V,SendMessage:X})))))},Qe=a(80),Ye=a(101),Ge=a(29),ze=a(238),Je=(a(164),a(54)),Ke=a(39),_e=a(130),Ze=a(254),Ve=a.n(Ze);function $e(e){var t=e.loginOrRegister,a=Object(n.useState)(""),c=Object(u.a)(a,2),o=c[0],s=c[1],m=Object(n.useState)(""),d=Object(u.a)(m,2),h=d[0],g=d[1],v=Object(n.useState)(""),E=Object(u.a)(v,2),b=E[0],y=E[1],w=Object(n.useState)(!1),O=Object(u.a)(w,2),k=O[0],j=O[1],x=Object(n.useState)(!1),C=Object(u.a)(x,2),S=C[0],N=C[1];function I(){return o.length>0&&b.length>0}var A=function(){var e=Object(i.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L("google",t.Zi.id_token);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function U(){return(U=Object(i.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,L("login");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(e,t){return M.apply(this,arguments)}function M(){return(M=Object(i.a)(l.a.mark((function e(a,n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(!0),setTimeout((function(){return console.log()}),1e3),e.prev=2,r="login"===a?{email:o,password:b}:{token:n},e.next=6,t(r,a);case 6:if("duplicate"!==e.sent){e.next=9;break}throw new Error("Please finish another session before starting a new one.");case 9:N(!0),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),setTimeout((function(){j(!1),e.t0.toString().includes("Failed to fetch")?g("No response from the server"):g(e.t0.message)}),1e3);case 15:case"end":return e.stop()}}),e,null,[[2,12]])})))).apply(this,arguments)}return r.a.createElement(r.a.Fragment,null,S?r.a.createElement(f.a,{to:"/app"}):r.a.createElement(Ke.a,{className:"Login"},r.a.createElement(Ke.a.Header,null," Sign In "),r.a.createElement(Ke.a.Body,null,r.a.createElement("form",{onSubmit:function(e){return U.apply(this,arguments)}},r.a.createElement(te.a,{controlId:"email"},r.a.createElement(Je.a,null,"Email"),r.a.createElement(ze.a,{autoFocus:!0,type:"email",value:o,onChange:function(e){return s(e.target.value)}})),r.a.createElement(te.a,{controlId:"password"},r.a.createElement(Je.a,null,"Password"),r.a.createElement(ze.a,{value:b,onChange:function(e){return y(e.target.value)},type:"password"})),h?r.a.createElement(te.a,null,r.a.createElement("div",{className:"tc dark-red"},h)):r.a.createElement(r.a.Fragment,null),r.a.createElement(te.a,{className:"tc"},r.a.createElement("a",{className:"tc",href:"/rocket-chat-front/#/register"},"Not signed up yet?"),r.a.createElement("div",{style:{marginTop:"15px"}},r.a.createElement(Ve.a,{clientId:"424517305265-0jh85p18hl9f6l17tqbat3ts7bgauc8j.apps.googleusercontent.com",buttonText:"I am real",onSuccess:A,onFailure:function(){g("Failed to login with Google!")},cookiePolicy:"single_host_origin"}))),r.a.createElement(p.a,{block:!0,variant:I()?"primary":"secondary",disabled:!I()||k,type:"submit"},k?r.a.createElement(_e.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"}):"Login")))))}var Xe=a(131),et=a.n(Xe);function tt(e){var t=e.loginOrRegister,a=Object(n.useState)(""),c=Object(u.a)(a,2),o=c[0],s=c[1],m=Object(n.useState)(""),d=Object(u.a)(m,2),h=d[0],g=d[1],v=Object(n.useState)(""),E=Object(u.a)(v,2),b=E[0],y=E[1],w=Object(n.useState)(!1),O=Object(u.a)(w,2),k=O[0],j=O[1],x=Object(n.useState)(""),C=Object(u.a)(x,2),N=C[0],I=C[1],A=Object(n.useState)(!1),U=Object(u.a)(A,2),L=U[0],M=U[1],B=Object(n.useState)(0),F=Object(u.a)(B,2),T=F[0],D=F[1];function q(){return o.length>0&&T>2&&h.length}function P(){return(P=Object(i.a)(l.a.mark((function e(a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),j(!0),setTimeout((function(){return console.log()}),1e3),e.prev=3,e.next=6,t({username:h,email:o,password:b},"register");case 6:return j(!1),e.next=9,et()("Almost there","We saved all your data, confirm your email to start using our app!","success");case 9:M(!0),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),setTimeout((function(){j(!1),e.t0.toString().includes("Failed to fetch")?I("No response from the server"):I(e.t0.message)}),500);case 15:case"end":return e.stop()}}),e,null,[[3,12]])})))).apply(this,arguments)}return r.a.createElement(r.a.Fragment,null,L?r.a.createElement(f.a,{to:"/login"}):r.a.createElement(Ke.a,{className:"Login"},r.a.createElement(Ke.a.Header,null," Register "),r.a.createElement(Ke.a.Body,null,r.a.createElement("form",{onSubmit:function(e){return P.apply(this,arguments)}},r.a.createElement(te.a,{controlId:"name"},r.a.createElement(Je.a,null,"Name"),r.a.createElement(ze.a,{autoFocus:!0,type:"text",value:h,onChange:function(e){return g(e.target.value)}})),r.a.createElement(te.a,{controlId:"email"},r.a.createElement(Je.a,null,"Email"),r.a.createElement(ze.a,{autoFocus:!0,type:"email",value:o,onChange:function(e){return s(e.target.value)}})),r.a.createElement(te.a,{controlId:"password"},r.a.createElement(Je.a,null,"Password"),r.a.createElement(ze.a,{style:{borderBottom:"3px solid ".concat(S[T].color)},value:b,onChange:function(e){var t=0,a=e.target.value;a.length>5&&t++,a.length>7&&t++,a.match(/\d+/g)&&t++,a.toLowerCase()!==a&&t++,D(t),y(a)},type:"password"})),N?r.a.createElement(te.a,null,r.a.createElement("div",{className:"tc dark-red"},N)):r.a.createElement(r.a.Fragment,null),r.a.createElement(p.a,{block:!0,variant:q()?"primary":"secondary",disabled:!q()||k,type:"submit"},k?r.a.createElement(_e.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"}):"Register")))))}a(426);var at=a(255),nt=a.n(at),rt=a(256);function ct(e){var t=e.isFAQ;return r.a.createElement("div",null,r.a.createElement(re.a.Container,{id:"left-tabs-example",defaultActiveKey:t?I[0].question:A[0].version},r.a.createElement(rt.a,{className:"bg-black-90 align-content-start"},r.a.createElement(oe.a,{md:4,lg:4,xl:4,sm:12,xs:12},r.a.createElement(Ge.a,{variant:"pills",className:"flex-column b--solid b--light-blue"},t?I.map((function(e){return r.a.createElement(Ge.a.Item,{key:e.question},r.a.createElement(Ge.a.Link,{eventKey:e.question},e.question))})):A.map((function(e){return r.a.createElement(Ge.a.Item,{key:e.version},r.a.createElement(Ge.a.Link,{eventKey:e.version},e.version))})))),r.a.createElement(oe.a,{sm:12,xs:12,md:8,xl:8,lg:8},r.a.createElement(re.a.Content,{className:"white ma3"},t?I.map((function(e){return r.a.createElement(re.a.Pane,{eventKey:e.question,key:e.answer},e.answer)})):A.map((function(e){return r.a.createElement(re.a.Pane,{key:e.changes[0],eventKey:e.version},r.a.createElement("ul",null,e.changes.map((function(e){return r.a.createElement("li",{key:e},e)}))))})))))))}function ot(e){var t=e.success,a=Object(n.useState)({done:!1,time:4}),c=Object(u.a)(a,2),o=c[0],s=c[1];return Object(n.useEffect)((function(){var e=setInterval((function(){var e=Object(d.a)({},o);o.time<2&&(e.done=!0),e.time-=1,s(e)}),1e3);return function(){clearInterval(e)}}),[o]),r.a.createElement(r.a.Fragment,null,o.done?r.a.createElement(f.a,{to:"/login"}):r.a.createElement(Ke.a,{className:"Login"},r.a.createElement(Ke.a.Header,null,"Email verification"),r.a.createElement(Ke.a.Body,null,t?r.a.createElement("div",null,"Your email was verified ",r.a.createElement("span",{className:"green"},"successfully")," :)",r.a.createElement("br",null)," Redirecting you in ",o.time):r.a.createElement("div",null,"Email verification ",r.a.createElement("span",{className:"red"},"failed")," :( ",r.a.createElement("br",null)," Redirecting you in ",o.time," "))))}var st=function(e){var t=e.loginOrRegister,a=e.path,c=Object(n.useContext)(dt).isLoading;return r.a.createElement(r.a.Fragment,null,r.a.createElement(nt.a,{active:c,spinner:!0,text:"Loading your data"},r.a.createElement("div",{className:"welcome-page overflow-y-auto overflow-x-hidden"},r.a.createElement(Ye.a,{bg:"dark",variant:"dark",expand:"lg"},r.a.createElement(Ye.a.Brand,{href:"/rocket-chat-front/#/login"},"Rocket-Chat v0.3 BETA"),r.a.createElement(Ye.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(Ye.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(Ge.a,{className:"mr-auto "},r.a.createElement(Ge.a.Link,{href:"/rocket-chat-front/#/faq"},"FAQ"),r.a.createElement(Ge.a.Link,{href:"/rocket-chat-front/#/release"},"Release notes")),r.a.createElement(Ge.a,null,r.a.createElement(Ge.a.Link,{href:"/rocket-chat-front/#/login"},"Sign in"),r.a.createElement(Ge.a.Link,{href:"/rocket-chat-front/#/register"},"Register")))),r.a.createElement(se.a,{variant:"warning",className:"tc ma0"},r.a.createElement("strong",null,"99.9% sure your account won't be deleted again!!",r.a.createElement("br",null),"Make sure to check out our ",r.a.createElement("a",{href:"/rocket-chat-front/#/release"},"release notes"),"!")),{"/login":r.a.createElement($e,{loginOrRegister:t}),"/register":r.a.createElement(tt,{loginOrRegister:t}),"/faq":r.a.createElement(ct,{isFAQ:!0}),"/release":r.a.createElement(ct,{isFAQ:!1}),"/vsuccess":r.a.createElement(ot,{success:!0}),"/vfailed":r.a.createElement(ot,{success:!1})}[a],"/login"===a||"/register"===a?r.a.createElement("img",{src:"https://dramarocket.com/wp-content/uploads/2018/01/icon-redrocket-2.png",alt:"logo",className:"center"}):r.a.createElement("div",null))))},lt=a(257),it=function(e){try{return L.a.verify(e,"4E576FBDECBE1")}catch(t){throw t}},ut=a(440),mt=a(224),dt=r.a.createContext({user:{},chats:[],isLoading:!1});var ft=function(){var e=Object(n.useState)(null),t=Object(u.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)([]),s=Object(u.a)(o,2),m=s[0],d=s[1],h=Object(n.useState)(null),p=Object(u.a)(h,2),g=p[0],v=p[1],E=Object(ut.a)(["userToken"]),b=Object(u.a)(E,3),y=b[0],O=b[1],x=b[2],C=Object(n.useState)(!1),S=Object(u.a)(C,2),I=S[0],A=S[1],U=Object(n.useState)(!1),L=Object(u.a)(U,2),B=L[0],F=L[1];function T(e){return q.apply(this,arguments)}function q(){return(q=Object(i.a)(l.a.mark((function e(t){var a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M(t);case 3:return a=e.sent,n=Y(a,t),d(n),e.abrupt("return","ok");case 9:e.prev=9,e.t0=e.catch(0),alert("error loading chats");case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function P(e){return R.apply(this,arguments)}function R(){return(R=Object(i.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(a=it(t)).notificationSettings=JSON.parse(a.notificationSettings),a.isOnline="true"===a.isOnline,a.userId=parseInt(a.userId),a.isOnline,c(a),A(!0),e.next=10,T(a.userId);case 10:return A(!1),e.abrupt("return",a);case 14:throw e.prev=14,e.t0=e.catch(0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}function H(e,t){return Q.apply(this,arguments)}function Q(){return(Q=Object(i.a)(l.a.mark((function e(t,a){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D(t,a);case 3:if(!(n=e.sent)){e.next=10;break}if(!n.text){e.next=7;break}return e.abrupt("return",n.text);case 7:return O("userToken",n.userToken,{maxAge:86400}),e.next=10,P(n.userToken);case 10:return e.abrupt("return","ok");case 13:throw e.prev=13,e.t0=e.catch(0),console.log(e.t0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}Object(n.useEffect)((function(){P(y.userToken).then((function(e){c(e),F(!0)})).catch((function(){return console.log("No cookie :(")}))}),[]),window.addEventListener("beforeunload",(function(e){W(a.userId),G()}));var G=function(){g.invoke("UserWentOfflineOrOnline",!1,a.userId).then((function(){return g.stop()})).catch((function(e){return console.log(e)}))},z=function(){try{var e=lt.a.auth2.getAuthInstance();e.signOut().then(e.disconnect())}catch(t){console.log("Not a googler!")}};return r.a.createElement(Re.ToastProvider,null,r.a.createElement(Qe.a,{className:"rocket"},r.a.createElement(f.d,null,r.a.createElement(f.b,{path:"/app"},r.a.createElement(dt.Provider,{value:{user:a,chats:m,isLoading:I}},r.a.createElement(He,{setHubConnection:v,setUser:c,setChats:d,SendMessage:function(e,t){var n=t,r=e;return function(e){var t=mt.AES.encrypt(e,mt.enc.Base64.parse(k),{iv:mt.enc.Base64.parse(j)}).toString();g.invoke("SendDirectMessage",a.userId,r,t).catch((function(e){return console.log(e)})),d((function(t){var a=Object.assign([],t),r=a[n];return r.msg.push(new w.Message({id:0,message:e})),a.splice(n,1),a.unshift(r),a}))}},logout:function(){c(null),G(),v(null),z(),x("userToken")},createNewChat:function(e,t,n){g.invoke("ChatWithUserWasCreated",a.userId,e,{chatId:e,chatName:a.userName,image:a.imageUrl}),d((function(a){var r=Object.assign([],a);return r.push({id:e,image:n,name:t,msg:[]}),r}))}}))),N.map((function(e){return r.a.createElement(f.b,{path:e,key:e},r.a.createElement(dt.Provider,{value:{user:a,chats:m,isLoading:I}},r.a.createElement(st,{path:e})))})),r.a.createElement(f.b,{path:"/register"},r.a.createElement(dt.Provider,{value:{user:a,chats:m,isLoading:I}},r.a.createElement(st,{path:"/register",loginOrRegister:H}))),r.a.createElement(f.b,null,r.a.createElement(dt.Provider,{value:{user:a,chats:m,isLoading:I}},r.a.createElement(st,{path:"/login",loginOrRegister:H})))),B?r.a.createElement(f.a,{to:"/app"}):r.a.createElement("div",null)))},ht=(a(437),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function pt(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(et()("New update!","Rocket chat ".concat(A[0].version," was downloaded, close all tabs to update!"),"success"),console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}o.a.render(r.a.createElement(ft,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/rocket-chat-front",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/rocket-chat-front","/service-worker.js");ht?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):pt(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):pt(t,e)}))}}()}},[[263,1,2]]]);
//# sourceMappingURL=main.abf88cdc.chunk.js.map