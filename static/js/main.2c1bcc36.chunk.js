(this["webpackJsonprocket-chat-front"]=this["webpackJsonprocket-chat-front"]||[]).push([[0],{116:function(e,t,a){e.exports=a.p+"static/media/notification.56a9110c.mp3"},192:function(e,t,a){},199:function(e,t,a){},271:function(e,t,a){e.exports=a.p+"static/media/lol.f8b7a2e4.mp3"},272:function(e,t,a){e.exports=a.p+"static/media/dr_stone_ending.470614e2.mp3"},310:function(e,t,a){e.exports=a(513)},315:function(e,t,a){},323:function(e,t){},325:function(e,t){},361:function(e,t){},362:function(e,t){},435:function(e,t,a){},472:function(e,t,a){},502:function(e,t,a){},513:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(17),o=a.n(c),s=(a(315),a(316),a(9)),i=a.n(s),l=a(18),u=a(8),m=a(44),d=a(91),f=a(70),h=a(38),p=a(27);function g(e){var t=e.setIsMobile,a=Object(n.useState)(!0),c=Object(u.a)(a,2),o=c[0],s=c[1],i=function(e){t(e),s(!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{show:o,onHide:function(){return s(!1)},centered:!0},r.a.createElement(h.a.Body,{closebutton:"true",className:"tc"},r.a.createElement("h3",null,"Swtich to mobile version"),r.a.createElement("div",null,r.a.createElement(p.a,{variant:"primary",onClick:function(){return i(!0)}},"Yes"),r.a.createElement(p.a,{style:{marginLeft:"10%"},variant:"secondary",onClick:function(){return i(!1)}},"No")))))}a(199);var v=a(271),E=a.n(v),b=a(272),w=a.n(b),y=a(273),O=function e(t){var a=t.dbId,n=t.id,r=t.message,c=t.dateTime;Object(y.a)(this,e),this.dbId=a,this.id=n,this.message=r,this.dateTime=c},k="https://rocket-chat-api.azurewebsites.net/",j="B?E(H+MbQeThWmZq",x="8G08T5AVQmeuECTfQCSY01ayQ7Dov4eD+reNumjCNtI=",C="pw7I2NywUBxIZQYAjenxWQ==",S=["Audio","Add Contact","My Account","Logout"],N=["witcher","drStone"],I=[{str:"weak",color:"red"},{str:"weakish",color:"darkorange"},{str:"medium",color:"#E1CB0C"},{str:"okay",color:"springgreen"},{str:"strong",color:"green"}],A=["/faq","/release","/vsuccess","/vfailed"],U=[{question:"Q: What do I do here?",answer:"A: You send messages to other people, could you imagine!!!"},{question:"Q: How to get started?",answer:"A: Please register, then add other people and talk to them as much as you want. Please mind the warning above when you submit any data."},{question:"Q: Who are the creators of this miracle?",answer:"A: Bohdan Boss and Artem Daddy :))"},{question:"Q: What are future plans for this project?",answer:"A: Show WhatsApp and Telegram how to make good apps..."},{question:"Q: Why can I not send emoji without text on PC?",answer:"A: This is a known issue and might be fixed later, hold tight!"},{question:"Q: Are my messages 100% secure?",answer:"A: Let's say sending credit card details is not a good idea, but gossips are totally fine."},{question:"Q: How can I suggest improvements?",answer:"A: Just start a chat with one of the Creators and show us your ideas."},{question:"Q: Lorem Ipsum?",answer:"A: Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."}],L=[{version:"v0.3.2",changes:["Improved chat window UI and built-in emoji"]},{version:"v0.3.1",changes:["Fix login and cookie related bugs"]},{version:"v0.3",changes:["Security updates","Notification settings","More efficient live communication","Email verification","Login with Google","Bugfixes and other minor improvements","Semi-advanced security for messages","Added cookies support"]},{version:"v0.2.1",changes:["Bugfixes and UI improvements"]},{version:"v0.2",changes:["Chats are sorted based on last message","Automatic reconnection in case of disconnect","Online/Offline status of users with notifications","Account settings with live update","Emoji for desktop users","Bugfixes and other minor improvements"]},{version:"v0.1",changes:["Registration/Login","Live messages","Message history is saved and is reloaded on login","Can add others to contact list","Audio settings"]}],T=a(71),M=a.n(T);function B(e){return F.apply(this,arguments)}function F(){return(F=Object(l.a)(i.a.mark((function e(t){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=M.a.sign({userId:t},j),e.next=4,fetch("".concat(k,"/api/getallchats"),{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({token:a})});case 4:return n=e.sent,e.next=7,n.json();case 7:return n=e.sent,e.abrupt("return",n);case 11:throw e.prev=11,e.t0=e.catch(0),e.t0;case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function D(e,t,a){return P.apply(this,arguments)}function P(){return(P=Object(l.a)(i.a.mark((function e(t,a,n){var r,c,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],e.prev=1,c=M.a.sign({chatId:t,totalMessages:n},j),e.next=5,fetch("".concat(k,"/api/getlastmessages"),{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({token:c})});case 5:return o=e.sent,e.next=8,o.json();case 8:return o=e.sent,e.next=11,o.forEach((function(e){var t=e.userId===a.userId?0:1;r.push(new O({id:t,message:e.messageText,dateTime:e.createdDate}))}));case 11:return e.abrupt("return",r);case 14:throw e.prev=14,e.t0=e.catch(1),e.t0;case 17:case"end":return e.stop()}}),e,null,[[1,14]])})))).apply(this,arguments)}function R(e,t){return W.apply(this,arguments)}function W(){return(W=Object(l.a)(i.a.mark((function e(t,a){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(k,"/api/").concat(a),{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify(t)});case 3:return n=e.sent,r=n.status,e.next=7,n.json();case 7:return n=e.sent,G(r,n.text),e.abrupt("return",n);case 12:throw e.prev=12,e.t0=e.catch(0),e.t0;case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}function q(){return(q=Object(l.a)(i.a.mark((function e(t,a){var n,r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log(k),n=M.a.sign({userId:t,emailToAdd:a},j),e.next=5,fetch("".concat(k,"/api/addchat"),{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({token:n})});case 5:return r=e.sent,c=r.status,e.next=9,r.json();case 9:return r=e.sent,G(c,r.text),e.abrupt("return",r);case 14:throw e.prev=14,e.t0=e.catch(0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}function H(){return(H=Object(l.a)(i.a.mark((function e(t,a,n,r,c){var o,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o=M.a.sign({userId:t,sound:a,newchat:n,newmessage:r,connection:c},j),e.next=4,fetch("".concat(k,"/api/settingsapply"),{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({token:o})});case 4:return s=e.sent,G(s.status,s.text),e.abrupt("return","ok");case 10:throw e.prev=10,e.t0=e.catch(0),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function Q(e){return Y.apply(this,arguments)}function Y(){return(Y=Object(l.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=M.a.sign({userId:t},j),e.next=3,fetch("".concat(k,"/api/disconnect"),{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({token:a})});case 3:404===e.sent.status&&console.log("Couldnt find a user");case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(e,t){switch(e){case 400:throw new Error(t);case 500:case 404:throw new Error("Server error,try again later")}}function z(e,t){var a=[];return e.forEach((function(e){var n,r;if(console.log(e),e.lastMessage){n=e.lastMessage.userId===t?0:1;var c=e.lastMessage;r={id:e.chatId,image:e.friendImageUrl,isOnline:e.isOnline,lastMessagesAreFetched:!1,name:e.friendUserName,msg:[new O({id:n,message:c.messageText,dateTime:c.createdDate})]}}else r={id:e.chatId,image:e.friendImageUrl,isOnline:e.isOnline,lastMessagesAreFetched:!1,name:e.friendUserName,msg:[]};a.push(r)})),a}var J=function(e,t){var a=0,n=!0,r=!1,c=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){if(o.value.id===e)return a;a++}}catch(i){r=!0,c=i}finally{try{n||null==s.return||s.return()}finally{if(r)throw c}}return-1},K=function(){var e=Object(l.a)(i.a.mark((function e(t,a,n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D(t,a,n.msg.length);case 3:return r=e.sent,n.msg.forEach((function(e){r.push(e)})),n.lastMessagesAreFetched=!0,n.msg=[],n.msg=Object(m.a)(r),e.abrupt("return",n);case 11:throw e.prev=11,e.t0=e.catch(0),e.t0;case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,a,n){return e.apply(this,arguments)}}(),Z=function(e,t){var a={},n={found:!1};e.forEach((function(e){var t=e.id;a[t]=1}));var r=!0,c=!1,o=void 0;try{for(var s,i=t[Symbol.iterator]();!(r=(s=i.next()).done);r=!0){var l=s.value;if(l in a){n.found=!0,n.id=l;break}}}catch(u){c=!0,o=u}finally{try{r||null==i.return||i.return()}finally{if(c)throw o}}return n},_=a(274),V=a.n(_),$=a(47),X=a(305),ee=a(112);var te=function(e){var t=e.show,a=e.handleClose,c=e.updateAudio,o=e.chooseSong,s=Object(n.useState)(0),i=Object(u.a)(s,2),l=i[0],m=i[1],d=Object(n.useState)(""),f=Object(u.a)(d,2),p=f[0],g=f[1],v=function(e){return e?"primary":"secondary"};return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{show:t,onHide:a,centered:!0},r.a.createElement(h.a.Body,null,r.a.createElement("h3",null,"Audio settings"),r.a.createElement("h5",null,"Current song"),r.a.createElement($.a,null,r.a.createElement($.a.Toggle,{variant:"success",id:"dropdown-basic"},p?r.a.createElement(r.a.Fragment,null,p):r.a.createElement(r.a.Fragment,null,"Choose song ")),r.a.createElement($.a.Menu,null,N.map((function(e){return r.a.createElement($.a.Item,{key:e,onClick:function(){return function(e){m(0),o(e),g(e)}(e)}},e)})))),r.a.createElement("h4",null," Playback "),r.a.createElement(X.a,{type:"radio",name:"options",value:l,onChange:function(e){m(e),e&&p?c(!0):e||c(!1)}},r.a.createElement(ee.a,{variant:v(Boolean(l)),value:1},"On"),r.a.createElement(ee.a,{variant:v(!Boolean(l)),value:0},"Off")))))},ae=a(62),ne=a(275);var re=function(e){var t=e.show,a=e.handleClose,c=e.createNewChat,o=Object(n.useState)(""),s=Object(u.a)(o,2),i=s[0],l=s[1],m=Object(n.useState)(""),d=Object(u.a)(m,2),f=d[0],g=d[1],v=Object(n.useContext)(St).user,E=v?v.userId:0;return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{show:t,onHide:a,centered:!0},r.a.createElement(h.a.Body,null,r.a.createElement("h3",null,"Add contact "),r.a.createElement(ae.a,{onSubmit:function(e){e.preventDefault(),function(e,t){return q.apply(this,arguments)}(E,i).then((function(e){if(e){var t=e.chatId,n=e.userName,r=e.friendImageUrl;c(t,n,r),a()}})).catch((function(e){e.toString().includes("Failed to fetch")?g("No response from the server"):g(e.message)}))}},r.a.createElement(ae.a.Group,{controlId:"formBasicEmail"},r.a.createElement(ae.a.Label,null,"Email address"),r.a.createElement(ae.a.Control,{type:"email",placeholder:"Enter email",onChange:function(e){return l(e.target.value)}}),r.a.createElement(ae.a.Text,{className:"text-muted"},"Ask creators about their current emails.")),f?r.a.createElement(ne.a,null,r.a.createElement("div",{className:"dark-red"},f)):r.a.createElement(r.a.Fragment,null),r.a.createElement(p.a,{variant:"primary",type:"submit",disabled:!(i.length>0)},"Add friend")))))},ce=a(156),oe=a(61),se=a(279),ie=a(68),le=a(93),ue=a(277),me=a.n(ue);var de=function(e){var t=e.type,a=e.UpdateUserData,c=Object(n.useState)(""),o=Object(u.a)(c,2),s=o[0],i=o[1],l=Object(n.useState)({show:!1,type:""}),m=Object(u.a)(l,2),d=m[0],f=m[1];function h(){return s.length>2}return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var n={type:t,value:s};"image"!==t||me()(s)?(a(n.type,n.value),f({show:!0,type:"success"})):f({show:!0,type:"danger"}),i("")}},r.a.createElement(ae.a.Row,null,r.a.createElement(ie.a,null,r.a.createElement(ae.a.Control,{placeholder:"new "+t,value:s,onChange:function(e){return i(e.target.value)}})),r.a.createElement(ie.a,null,r.a.createElement(p.a,{type:"submit",variant:h()?"primary":"secondary",disabled:!h()}," Update!")),d.show?r.a.createElement(le.a,{variant:d.type,onClose:function(){return f({show:!1,type:""})},dismissible:!0,className:"ma2"},"danger"===d.type?"Your ".concat(t," change failed with many errors!"):"Your "+t+" was changed successfully!"):r.a.createElement("div",null))))},fe=a(278),he=a.n(fe);var pe=function(e){var t=e.name,a=e.activeSwitches,c=e.handleChange,o=Object(n.useState)(""),s=Object(u.a)(o,2),i=s[0],l=s[1];Object(n.useEffect)((function(){var e=t.match(/([A-Z]?[^A-Z]*)/g).slice(0,-1),a="";if(e){var n=!0,r=!1,c=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var i=o.value;a+=" "+(i=m(i))}}catch(u){r=!0,c=u}finally{try{n||null==s.return||s.return()}finally{if(r)throw c}}}else a=t=m(t);l(a)}));var m=function(e){var t=e.charAt(0);return t===t.toLowerCase()&&t!==t.toUpperCase()?t.toUpperCase()+e.substring(1):e};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"col-8",style:{marginRight:"5px"}},i),r.a.createElement("div",{className:"col-2"},r.a.createElement("label",null,r.a.createElement(he.a,{onChange:function(){return c(t)},checked:Boolean(a[t]),onColor:"#86d3ff",onHandleColor:"#2693e6",handleDiameter:30,uncheckedIcon:!1,checkedIcon:!1,boxShadow:"0px 1px 5px rgba(0, 0, 0, 0.6)",activeBoxShadow:"0px 0px 1px 10px rgba(0, 0, 0, 0.2)",height:20,width:48}))))};var ge=function(e){var t=e.UpdateUserData,a=(e.handleClose,Object(n.useContext)(St).user),c=Object(n.useState)(a.notificationSettings),o=Object(u.a)(c,2),s=o[0],i=o[1],l=Object(n.useState)({show:!1,type:""}),m=Object(u.a)(l,2),f=m[0],h=m[1];function g(e){var t=Object(d.a)({},s);t[e]=!t[e],i(t)}return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t("notifications",s);var n=s.sound,r=s.newChatReceived,c=s.newMessageReceived,o=s.connectionChanged;(function(e,t,a,n,r){return H.apply(this,arguments)})(a.userId,n,r,c,o).then((function(){return h({show:!0,type:"success"})})).catch((function(e){h({show:!0,type:"danger"}),console.log(e)}))}},r.a.createElement("label",null,r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row h-auto",style:{alignContent:"start"}},Object.keys(s).map((function(e,t){return 0===t?r.a.createElement("div",{key:e}):r.a.createElement(pe,{handleChange:g,activeSwitches:s,name:e,key:e})}))))),r.a.createElement("br",null),f.show?r.a.createElement(le.a,{variant:f.type,onClose:function(){return h({show:!1,type:""})},dismissible:!0,className:"ma2"},"danger"===f.type?"Failed to save notification settings!":"Notification settings changed successfully!"):r.a.createElement("div",null),r.a.createElement("br",null)," ",r.a.createElement(p.a,{type:"submit"}," Save ")))};var ve=function(e){var t=e.show,a=e.handleClose,c=e.UpdateUserData,o=Object(n.useContext)(St).user;return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{show:t,onHide:a,centered:!0},r.a.createElement(h.a.Body,null,r.a.createElement("h3",null,"My Account"),r.a.createElement(se.a,{defaultActiveKey:"Picture",id:"uncontrolled-tab-example"},r.a.createElement(oe.a,{eventKey:"Picture",title:"Picture"},o.imageUrl?r.a.createElement(ce.a,null,r.a.createElement(ce.a.Image,{roundedCircle:!0,width:100,height:120,alt:"profile picc",src:o.imageUrl}),r.a.createElement(ce.a.Caption,null,"Your profile picture."),r.a.createElement("div",null,r.a.createElement(de,{UpdateUserData:c,type:"image"}))):r.a.createElement("span",{className:"ma2"}," You have no pic",r.a.createElement("div",null,r.a.createElement(de,{UpdateUserData:c,type:"image"})))),r.a.createElement(oe.a,{eventKey:"Name",title:"Name"},r.a.createElement("div",{className:"ma2 "},r.a.createElement("h6",null,"Your current name is ",r.a.createElement("strong",null,o.userName)),r.a.createElement(de,{UpdateUserData:c,type:"name"}))),r.a.createElement(oe.a,{eventKey:"Notifications",title:"Notifications"},r.a.createElement("div",{className:"ma2 "},r.a.createElement(ge,{UpdateUserData:c})))),r.a.createElement(p.a,{style:{float:"right"},onClick:function(){return a()}},"Close"))))};var Ee=function(e){var t=e.updateAudio,a=e.logout,c=e.chooseSong,o=e.createNewChat,s=e.UpdateUserData,i=Object(n.useState)({type:"",seen:!1}),l=Object(u.a)(i,2),m=l[0],d=l[1],f=function(){return d({type:"",seen:!1})};return r.a.createElement(r.a.Fragment,null,r.a.createElement($.a,null,r.a.createElement($.a.Toggle,{variant:"secondary",size:"sm",id:"dropdown-basic"},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},r.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}))),r.a.createElement($.a.Menu,null,S.map((function(e,t){return"Logout"===e?r.a.createElement($.a.Item,{key:e,onClick:a},S[t]):r.a.createElement($.a.Item,{key:e,onClick:function(){return e=S[t],d({type:e,seen:!0});var e}},S[t]," ")})))),{"Add Contact":r.a.createElement(re,{show:m.seen,handleClose:f,createNewChat:o}),Audio:r.a.createElement(te,{show:m.seen,handleClose:f,updateAudio:t,chooseSong:c}),"My Account":r.a.createElement(ve,{show:m.seen,handleClose:f,UpdateUserData:s}),Logout:r.a.createElement(r.a.Fragment,null)}[m.type])},be=(a(435),a(48));a(437);var we=function(e){var t=e.clickOnChat,a=e.setChatIndex,c=Object(n.useContext)(St).chats,o=Object(n.useContext)(nt),s=o.chatIndex,i=o.isMobile,l={margin:"2px",backgroundColor:"#383838",color:"white"},u={margin:"0px ",marginBottom:"5px ",marginTop:"5px ",backgroundColor:"black",color:"white"};return r.a.createElement(be.g,null,r.a.createElement(be.b,{className:"scrollable"},c.map((function(e,n){return r.a.createElement("div",{onClick:function(){return function(e,n){t(e,n,!0),a(n)}(e.id,n)},key:e.id},r.a.createElement(be.c,{style:n!==s||i?l:u},e.image?r.a.createElement(be.a,{imgUrl:e.image}):r.a.createElement(be.a,{letter:e.name.charAt(0),style:{color:"black !important"}}),r.a.createElement(be.d,null,r.a.createElement(be.e,{justify:!0},r.a.createElement(be.h,{ellipsis:!0},e.name),r.a.createElement(be.f,{style:{marginLeft:"5px"}},e.isOnline?r.a.createElement("status-indicator",{active:!0}):r.a.createElement("div",null))),r.a.createElement(be.f,{ellipsis:!0},e.msg.length>0?e.msg[e.msg.length-1].message:"Say something"))))}))))};function ye(e){var t=e.createNewChat,a=e.LoadTenMessages,c=e.updAudio,o=e.setSong,s=e.logout,i=e.setChatIndex,l=e.UpdateUserData,u=Object(n.useContext)(nt).isMobile;return r.a.createElement("div",{className:u?"left-side col-12":"left-side col-4 col-sm-4 col-md-4 col-lg-2 col-xl-2"},r.a.createElement(Ee,{createNewChat:t,updateAudio:c,chooseSong:o,logout:function(){return s()},UpdateUserData:l}),r.a.createElement(we,{clickOnChat:a,setChatIndex:i}))}var Oe=a(303),ke=a(304),je=a(531),xe=a(533),Ce=a(537),Se=a(534),Ne=a(535),Ie=a(292),Ae=a.n(Ie),Ue=a(290),Le=a.n(Ue),Te=a(291),Me=a.n(Te),Be=(a(438),a(301)),Fe=function(){var e=document.getElementsByClassName("chat-panel")[0],t=e.scrollHeight-e.clientHeight;e.scrollTop=t>0?t:0},De=Object(je.a)((function(e){return{root:{padding:"2px 4px",display:"flex",alignItems:"center"},input:{flex:1,wordWrap:"break-word"},iconButton:{padding:10,height:"100%"},divider:{margin:4,height:"100%"}}}));function Pe(e){var t=e.onSendClick,a=De(),c=Object(n.useState)(""),o=Object(u.a)(c,2),s=o[0],i=o[1],l=function(){return s.trim().length>0};return r.a.createElement(xe.a,{component:"form",className:a.root,onSubmit:function(){t(s),i(""),setTimeout((function(){Fe()}),20)}},r.a.createElement(Oe.a,{trigger:"click",placement:"top",overlay:r.a.createElement(ke.a,{id:"popover-basic"},r.a.createElement(Be.a,{title:"Emoji v2",showPreview:!1,set:"emojione",onSelect:function(e){var t="".concat(s).concat(e.native);i(t)}}))},r.a.createElement(Ne.a,{className:a.iconButton,"aria-label":"emoji"},r.a.createElement(Le.a,null))),r.a.createElement(Ce.a,{onChange:function(e){i(e.target.value),Fe()},value:s,rowsMax:8,multiline:!0,className:a.input,placeholder:"write smth",inputProps:{"aria-label":"search google maps"}}),r.a.createElement(Ne.a,{className:a.iconButton,"aria-label":"upload"},r.a.createElement(Me.a,null)),r.a.createElement(Se.a,{className:a.divider,orientation:"vertical"}),r.a.createElement(Ne.a,{type:"submit",color:l()?"primary":"secondary",disabled:!l(),className:a.iconButton,"aria-label":"send"},r.a.createElement(Ae.a,null)))}a(472);var Re=function(e){var t=e.messages;return Object(n.useEffect)((function(){Fe()}),[]),r.a.createElement("ul",{className:"chat-panel"},t.map((function(e,t){return r.a.createElement("li",{key:t,className:0===e.id?"me":"him"}," ",r.a.createElement("div",{className:"messsage-text"},e.message))})))};var We=function(e){var t=e.chatData,a=e.onSend,c=e.loadTen,o=e.GoBack,s=Object(n.useContext)(nt),i=s.chatId,l=s.chatIndex,u=s.isMobile,m=function(e){c(i,l,!1)};return r.a.createElement("div",{id:"chat-side"},u?r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row header"},r.a.createElement(p.a,{type:"button",variant:"secondary",className:"col-2 arrow-back ",onClick:function(){return o("left")}},r.a.createElement("span",{className:"btn-label"},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},r.a.createElement("path",{fill:"none",d:"M0 0h24v24H0V0z"}),r.a.createElement("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"}))),"Back"),r.a.createElement("div",{className:"white tc col-10",style:{backgroundColor:"#6c757d"}},r.a.createElement("strong",{className:"black"},t.name)," is",r.a.createElement("span",{className:t.isOnline?"dark-blue":"white"}," ",t.isOnline?" online":" offline"),r.a.createElement("h5",{className:"hover-bg-white-40 pointer",onClick:m},"Load more messages")))):r.a.createElement("h4",{className:"white tc hover-bg-white-40 pointer col-10 flex-none",onClick:m},"Load more"),r.a.createElement(Re,{messages:t.msg}),r.a.createElement("footer",{className:"footer"},r.a.createElement(Pe,{onSendClick:a})))};function qe(e){var t=e.LoadTenMessages,a=e.SendMessage,c=e.GoBack,o=Object(n.useContext)(St).chats,s=Object(n.useContext)(nt),i=s.chatIndex,l=s.isMobile;return r.a.createElement("div",{className:l?"right-side col-12":"right-side col-8 col-sm-8 col-md-8 col-lg-10 col-xl-10 "},r.a.createElement("div",{className:"overflow-hidden"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},-1===i?0!==o.length?r.a.createElement("div",{className:"tc center col align-self-center",id:"idle-msg"},"Click on a chat to start messaging!"):r.a.createElement("div",{className:"tc center col align-self-center",id:"idle-msg"},"Click on a button in top left corner and add someone!"):r.a.createElement("div",{className:"col"},r.a.createElement(We,{loadTen:t,chatData:o[i],onSend:a,GoBack:c}))))))}var He=a(302),Qe=a(116),Ye=a.n(Qe),Ge=a(63),ze=a.n(Ge);function Je(e){var t=e.name,a=e.sound;return r.a.createElement("div",null,r.a.createElement("strong",null,"New chat!"),r.a.createElement("div",null,r.a.createElement("strong",null,t)," created a chat with you!"),a?r.a.createElement(ze.a,{url:Ye.a,autoLoad:!0,playStatus:ze.a.status.PLAYING}):r.a.createElement("div",null))}function Ke(e){var t=e.name,a=e.body,n=e.sound;return r.a.createElement("div",null,r.a.createElement("strong",null,t),r.a.createElement("div",null,a),n?r.a.createElement(ze.a,{url:Ye.a,autoLoad:!0,playStatus:ze.a.status.PLAYING}):r.a.createElement("div",null))}function Ze(e){var t=e.online,a=e.sound;return r.a.createElement("div",null,r.a.createElement("strong",null,"Connection status changed!"),r.a.createElement("div",null,t?"You are online now":"You went offline, your messages will not be sent!"),t?r.a.createElement("div",null):r.a.createElement("div",null,"We will try to reconnect you!"),a?r.a.createElement(ze.a,{url:Ye.a,autoLoad:!0,playStatus:ze.a.status.PLAYING}):r.a.createElement("div",null))}function _e(e){var t=e.isLast,a=e.nextTime,c=e.sound,o=Object(n.useState)(a),s=Object(u.a)(o,2),i=s[0],l=s[1];return Object(n.useEffect)((function(){var e=setInterval((function(){return l(i-1)}),1e3);return function(){clearInterval(e)}}),[i]),r.a.createElement("div",null,r.a.createElement("strong",null,"Reconnection failed!"),r.a.createElement("div",null,t?"Failed to reconnect, please reload the page or try again later.":"We will try again in ".concat(i," seconds.")),c?r.a.createElement(ze.a,{url:Ye.a,autoLoad:!0,playStatus:ze.a.status.PLAYING}):r.a.createElement("div",null))}var Ve=a(262);function $e(){return($e=Object(l.a)(i.a.mark((function e(t,a,n,c,o,s){var l,u,d,f;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=(new He.a).withUrl("".concat(k,"/chat")).build(),t((function(e){return u=e,e})),u){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,e.next=7,l.start();case 7:return e.next=9,l.invoke("UserWentOfflineOrOnline",!0,u.userId);case 9:d=u.notificationSettings,f=d.sound,d.connectionChanged&&c(r.a.createElement(Ze,{online:!0,sound:f}),"success",3e3),l.onclose((function(){var e;if(Q(u.userId),t((function(t){return e=t,t})),e){var s=e.notificationSettings,i=s.sound;s.connectionChanged&&c(r.a.createElement(Ze,{sound:i,online:!1}),"warning",3e3),Xe(0,l,n,c,e.notificationSettings).then((function(){o(-1),a((function(e){var t=Object(m.a)(e);return t.forEach((function(e){e.msg=[],e.lastMessagesAreFetched=!1})),t}))})).catch((function(e){return console.log(e)}))}})),l.on("sendDirectMessage",(function(e,n,i){var l,u=Ve.AES.decrypt(i,Ve.enc.Base64.parse(x),{iv:Ve.enc.Base64.parse(C)});i=Ve.enc.Utf8.stringify(u),t((function(e){return l=e,e}));var m=l.notificationSettings,d=m.sound,f=m.newMessageReceived;a((function(t){var a=J(n,t);if(-1!==a&&l.userId!==e){var u=Object.assign([],t);u[a].msg.push(new O({id:1,message:i})),u[a].isOnline=!0,f&&c(r.a.createElement(Ke,{sound:d,name:u[a].name,body:i}),"info",5e3);var m,h=u[a];return u.splice(a,1),u.unshift(h),s((function(e){return m=e,e})),o((function(){return J(m,u)})),u}return t}))})),l.on("UserWentOfflineOrOnline",(function(e,t,n){a((function(a){var r=Object.assign([],a);if(t!==u.userId){var c=Z(a,n);if(c.found)r[J(c.id,a)].isOnline=e}return r}))})),l.on("UserDataChanged",(function(e,t,n,r){u.userId!==e&&a((function(e){var a=Object(m.a)(e),c=Z(e,t);c.found&&(a[J(c.id,e)][n]=r);return a}))})),l.on("getChat",(function(e,n){var o;if(t((function(e){return o=e,e})),u.userId===e){a((function(e){var t=Object.assign([],e);return t.push({id:n.chatId,image:n.image,isOnline:!0,name:n.chatName,msg:[]}),Object.assign([],t)}));var s=o.notificationSettings,i=s.sound;s.newChatReceived&&c(r.a.createElement(Je,{name:n.chatName,sound:i}),"info",5e3)}})),e.next=23;break;case 18:e.prev=18,e.t0=e.catch(4),console.log(e.t0),c(r.a.createElement(Ze,{online:!1}),"warning",3e3),Xe(0,l,n,c,u.notificationSettings);case 23:return e.abrupt("return",l);case 24:case"end":return e.stop()}}),e,null,[[4,18]])})))).apply(this,arguments)}function Xe(e,t,a,n,r){return et.apply(this,arguments)}function et(){return(et=Object(l.a)(i.a.mark((function e(t,a,n,c,o){var s,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:3e3,s=o.sound,l=o.connectionChanged,setTimeout((function(){a.start().then((function(){return n(a),l&&c(r.a.createElement(Ze,{online:!0,sound:s}),"success",4e3),new Promise((function(e,t){return e(!0)}))})).catch((function(){if(!(t<4))return c(r.a.createElement(_e,{isLast:!0}),"error",7e4),!1;l&&c(r.a.createElement(_e,{sound:s,nextTime:3e3*(t+1)/1e3,isLast:!1}),"warning",3e3*(t+1)),Xe(t+1,a,n,c,o)}))}),3e3*t);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var tt=a(147),at=a(536),nt=r.a.createContext({chatId:null,chatIndex:null,isMobile:!1}),rt=function(e){var t=e.setChats,a=e.SendMessage,c=e.logout,o=e.createNewChat,s=e.setUser,i=e.setHubConnection,l=Object(n.useContext)(St),h=l.user,p=l.chats,v=V()(),b=Object(tt.useToasts)(),y=b.addToast,O=b.removeToast,k=Object(n.useState)(-1),j=Object(u.a)(k,2),x=j[0],C=j[1],S=Object(n.useState)(-1),N=Object(u.a)(S,2),I=N[0],A=N[1],U=Object(n.useState)(null),L=Object(u.a)(U,2),T=L[0],M=L[1],B=Object(n.useState)(!1),F=Object(u.a)(B,2),D=F[0],P=F[1],R=Object(n.useState)(!1),W=Object(u.a)(R,2),q=W[0],H=W[1],Q=Object(n.useState)("left"),Y=Object(u.a)(Q,2),G=Y[0],z=Y[1],J=Object(at.a)(["userToken"]),Z=Object(u.a)(J,3),_=(Z[0],Z[1],Z[2]);Object(n.useEffect)((function(){(function(e,t,a,n,r,c){return $e.apply(this,arguments)})(s,t,i,$,A,C).then((function(e){i(e)}))}),[]);var $=function(e,t,a){y(e,{appearance:t,autoDismiss:!1},(function(e){a<6e4&&setTimeout((function(){return O(e)}),a)}))},X=function(e,t){var a;i((function(e){return a=e,e})),s((function(a){var n=Object(d.a)({},a);switch(e){case"image":n.imageUrl=t;break;case"name":n.userName=t;break;case"notifications":n.notificationSettings=t}return n})),"notifications"!==e&&a.invoke("UserDataChanged",h.userId,e,t),_("userToken")},ee=function(e,a,n){n&&C(e);var r=Object(m.a)(p),c=r[a];if(!c.lastMessagesAreFetched&&c.msg.length>10&&(c.lastMessagesAreFetched=!0),!c.lastMessagesAreFetched||!n&&c.msg.length>10){var o=c.msg.length,s=c.lastMessagesAreFetched,i=document.getElementsByClassName("chat-panel")[0];K(e,h,c).then((function(e){o!==e.msg.length&&(t(r),s?i.scrollTop=0:Fe())})).catch((function(e){console.log(e),alert("error loading messages")}))}},te=function(e){var t=document.getElementsByTagName("audio")[0];e?t.play():t.pause()},ae=function(e){a(x,I)(e),A(0)};return Object(n.useEffect)((function(){h||P(!0)}),[v,h]),r.a.createElement(r.a.Fragment,null,r.a.createElement(nt.Provider,{value:{chatId:x,chatIndex:I,isMobile:q}},v.isMobile()?r.a.createElement(g,{setIsMobile:H}):r.a.createElement("div",null),D?r.a.createElement(f.a,{to:"/"}):r.a.createElement("div",{className:"row"},r.a.createElement("audio",{src:function(e){switch(e){case"witcher":return E.a;case"drStone":return w.a;default:return}}(T),preload:"true",loop:!0}),q?"left"===G?r.a.createElement(ye,{LoadTenMessages:ee,createNewChat:o,logout:c,setChatIndex:function(e){A(e),z("right")},setSong:M,updAudio:te,UpdateUserData:X}):r.a.createElement(qe,{LoadTenMessages:ee,SendMessage:ae,GoBack:z}):r.a.createElement(r.a.Fragment,null,r.a.createElement(ye,{LoadTenMessages:ee,createNewChat:o,logout:c,setChatIndex:A,setSong:M,updAudio:te,UpdateUserData:X}),r.a.createElement(qe,{LoadTenMessages:ee,SendMessage:ae})))))},ct=a(90),ot=a(117),st=a(29),it=a(276),lt=(a(192),a(60)),ut=a(41),mt=a(149),dt=a(297),ft=a.n(dt);function ht(e){var t=e.loginOrRegister,a=Object(n.useState)(""),c=Object(u.a)(a,2),o=c[0],s=c[1],m=Object(n.useState)(""),d=Object(u.a)(m,2),h=d[0],g=d[1],v=Object(n.useState)(""),E=Object(u.a)(v,2),b=E[0],w=E[1],y=Object(n.useState)(!1),O=Object(u.a)(y,2),k=O[0],j=O[1],x=Object(n.useState)(!1),C=Object(u.a)(x,2),S=C[0],N=C[1];function I(){return o.length>0&&b.length>0}var A=function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L("google",t.Zi.id_token);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function U(){return(U=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,L("login");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(e,t){return T.apply(this,arguments)}function T(){return(T=Object(l.a)(i.a.mark((function e(a,n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(!0),setTimeout((function(){return console.log()}),1e3),e.prev=2,r="login"===a?{email:o,password:b}:{token:n},e.next=6,t(r,a);case 6:if("duplicate"!==e.sent){e.next=9;break}throw new Error("Please finish another session before starting a new one.");case 9:N(!0),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),setTimeout((function(){j(!1),e.t0.toString().includes("Failed to fetch")?g("No response from the server"):g(e.t0.message)}),1e3);case 15:case"end":return e.stop()}}),e,null,[[2,12]])})))).apply(this,arguments)}return r.a.createElement(r.a.Fragment,null,S?r.a.createElement(f.a,{to:"/app"}):r.a.createElement(ut.a,{className:"Login"},r.a.createElement(ut.a.Header,null," Sign In "),r.a.createElement(ut.a.Body,null,r.a.createElement("form",{onSubmit:function(e){return U.apply(this,arguments)}},r.a.createElement(ne.a,{controlId:"email"},r.a.createElement(lt.a,null,"Email"),r.a.createElement(it.a,{autoFocus:!0,type:"email",value:o,onChange:function(e){return s(e.target.value)}})),r.a.createElement(ne.a,{controlId:"password"},r.a.createElement(lt.a,null,"Password"),r.a.createElement(it.a,{value:b,onChange:function(e){return w(e.target.value)},type:"password"})),h?r.a.createElement(ne.a,null,r.a.createElement("div",{className:"tc dark-red"},h)):r.a.createElement(r.a.Fragment,null),r.a.createElement(ne.a,{className:"tc"},r.a.createElement("a",{className:"tc",href:"/rocket-chat-front/#/register"},"Not signed up yet?"),r.a.createElement("div",{style:{marginTop:"15px"}},r.a.createElement(ft.a,{clientId:"424517305265-0jh85p18hl9f6l17tqbat3ts7bgauc8j.apps.googleusercontent.com",buttonText:"I am real",onSuccess:A,onFailure:function(){g("Failed to login with Google!")},cookiePolicy:"single_host_origin"}))),r.a.createElement(p.a,{block:!0,variant:I()?"primary":"secondary",disabled:!I()||k,type:"submit"},k?r.a.createElement(mt.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"}):"Login")))))}var pt=a(150),gt=a.n(pt);function vt(e){var t=e.loginOrRegister,a=Object(n.useState)(""),c=Object(u.a)(a,2),o=c[0],s=c[1],m=Object(n.useState)(""),d=Object(u.a)(m,2),h=d[0],g=d[1],v=Object(n.useState)(""),E=Object(u.a)(v,2),b=E[0],w=E[1],y=Object(n.useState)(!1),O=Object(u.a)(y,2),k=O[0],j=O[1],x=Object(n.useState)(""),C=Object(u.a)(x,2),S=C[0],N=C[1],A=Object(n.useState)(!1),U=Object(u.a)(A,2),L=U[0],T=U[1],M=Object(n.useState)(0),B=Object(u.a)(M,2),F=B[0],D=B[1];function P(){return o.length>0&&F>2&&h.length}function R(){return(R=Object(l.a)(i.a.mark((function e(a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),j(!0),setTimeout((function(){return console.log()}),1e3),e.prev=3,e.next=6,t({username:h,email:o,password:b},"register");case 6:return j(!1),e.next=9,gt()("Almost there","We saved all your data, confirm your email to start using our app!","success");case 9:T(!0),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),setTimeout((function(){j(!1),e.t0.toString().includes("Failed to fetch")?N("No response from the server"):N(e.t0.message)}),500);case 15:case"end":return e.stop()}}),e,null,[[3,12]])})))).apply(this,arguments)}return r.a.createElement(r.a.Fragment,null,L?r.a.createElement(f.a,{to:"/login"}):r.a.createElement(ut.a,{className:"Login"},r.a.createElement(ut.a.Header,null," Register "),r.a.createElement(ut.a.Body,null,r.a.createElement("form",{onSubmit:function(e){return R.apply(this,arguments)}},r.a.createElement(ne.a,{controlId:"name"},r.a.createElement(lt.a,null,"Name"),r.a.createElement(it.a,{autoFocus:!0,type:"text",value:h,onChange:function(e){return g(e.target.value)}})),r.a.createElement(ne.a,{controlId:"email"},r.a.createElement(lt.a,null,"Email"),r.a.createElement(it.a,{autoFocus:!0,type:"email",value:o,onChange:function(e){return s(e.target.value)}})),r.a.createElement(ne.a,{controlId:"password"},r.a.createElement(lt.a,null,"Password"),r.a.createElement(it.a,{style:{borderBottom:"3px solid ".concat(I[F].color)},value:b,onChange:function(e){var t=0,a=e.target.value;a.length>5&&t++,a.length>7&&t++,a.match(/\d+/g)&&t++,a.toLowerCase()!==a&&t++,D(t),w(a)},type:"password"})),S?r.a.createElement(ne.a,null,r.a.createElement("div",{className:"tc dark-red"},S)):r.a.createElement(r.a.Fragment,null),r.a.createElement(p.a,{block:!0,variant:P()?"primary":"secondary",disabled:!P()||k,type:"submit"},k?r.a.createElement(mt.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"}):"Register")))))}a(502);var Et=a(298),bt=a.n(Et),wt=a(299);function yt(e){var t=e.isFAQ;return r.a.createElement("div",null,r.a.createElement(oe.a.Container,{id:"left-tabs-example",defaultActiveKey:t?U[0].question:L[0].version},r.a.createElement(wt.a,{className:"bg-black-90 align-content-start"},r.a.createElement(ie.a,{md:4,lg:4,xl:4,sm:12,xs:12},r.a.createElement(st.a,{variant:"pills",className:"flex-column b--solid b--light-blue"},t?U.map((function(e){return r.a.createElement(st.a.Item,{key:e.question},r.a.createElement(st.a.Link,{eventKey:e.question},e.question))})):L.map((function(e){return r.a.createElement(st.a.Item,{key:e.version},r.a.createElement(st.a.Link,{eventKey:e.version},e.version))})))),r.a.createElement(ie.a,{sm:12,xs:12,md:8,xl:8,lg:8},r.a.createElement(oe.a.Content,{className:"white ma3"},t?U.map((function(e){return r.a.createElement(oe.a.Pane,{eventKey:e.question,key:e.answer},e.answer)})):L.map((function(e){return r.a.createElement(oe.a.Pane,{key:e.changes[0],eventKey:e.version},r.a.createElement("ul",null,e.changes.map((function(e){return r.a.createElement("li",{key:e},e)}))))})))))))}function Ot(e){var t=e.success,a=Object(n.useState)({done:!1,time:4}),c=Object(u.a)(a,2),o=c[0],s=c[1];return Object(n.useEffect)((function(){var e=setInterval((function(){var e=Object(d.a)({},o);o.time<2&&(e.done=!0),e.time-=1,s(e)}),1e3);return function(){clearInterval(e)}}),[o]),r.a.createElement(r.a.Fragment,null,o.done?r.a.createElement(f.a,{to:"/login"}):r.a.createElement(ut.a,{className:"Login"},r.a.createElement(ut.a.Header,null,"Email verification"),r.a.createElement(ut.a.Body,null,t?r.a.createElement("div",null,"Your email was verified ",r.a.createElement("span",{className:"green"},"successfully")," :)",r.a.createElement("br",null)," Redirecting you in ",o.time):r.a.createElement("div",null,"Email verification ",r.a.createElement("span",{className:"red"},"failed")," :( ",r.a.createElement("br",null)," Redirecting you in ",o.time," "))))}var kt=function(e){var t=e.loginOrRegister,a=e.path,c=Object(n.useContext)(St).isLoading;return r.a.createElement(r.a.Fragment,null,r.a.createElement(bt.a,{active:c,spinner:!0,text:"Loading your data"},r.a.createElement("div",{className:"welcome-page overflow-y-auto overflow-x-hidden"},r.a.createElement(ot.a,{bg:"dark",variant:"dark",expand:"lg"},r.a.createElement(ot.a.Brand,{href:"/rocket-chat-front/#/login"},"Rocket-Chat v0.3.1 BETA"),r.a.createElement(ot.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(ot.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(st.a,{className:"mr-auto "},r.a.createElement(st.a.Link,{href:"/rocket-chat-front/#/faq"},"FAQ"),r.a.createElement(st.a.Link,{href:"/rocket-chat-front/#/release"},"Release notes")),r.a.createElement(st.a,null,r.a.createElement(st.a.Link,{href:"/rocket-chat-front/#/login"},"Sign in"),r.a.createElement(st.a.Link,{href:"/rocket-chat-front/#/register"},"Register")))),r.a.createElement(le.a,{variant:"warning",className:"tc ma0"},r.a.createElement("strong",null,"99.9% sure your account won't be deleted again!!",r.a.createElement("br",null),"Make sure to check out our ",r.a.createElement("a",{href:"/rocket-chat-front/#/release"},"release notes"),"!")),{"/login":r.a.createElement(ht,{loginOrRegister:t}),"/register":r.a.createElement(vt,{loginOrRegister:t}),"/faq":r.a.createElement(yt,{isFAQ:!0}),"/release":r.a.createElement(yt,{isFAQ:!1}),"/vsuccess":r.a.createElement(Ot,{success:!0}),"/vfailed":r.a.createElement(Ot,{success:!1})}[a],"/login"===a||"/register"===a?r.a.createElement("img",{src:"https://dramarocket.com/wp-content/uploads/2018/01/icon-redrocket-2.png",alt:"logo",className:"center"}):r.a.createElement("div",null))))},jt=a(300),xt=function(e){try{return M.a.verify(e,j)}catch(t){throw t}},Ct=a(262),St=r.a.createContext({user:{},chats:[],isLoading:!1});var Nt=function(){var e=Object(n.useState)(null),t=Object(u.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)([]),s=Object(u.a)(o,2),m=s[0],d=s[1],h=Object(n.useState)(null),p=Object(u.a)(h,2),g=p[0],v=p[1],E=Object(at.a)(["userToken"]),b=Object(u.a)(E,3),w=b[0],y=b[1],k=b[2],j=Object(n.useState)(!1),S=Object(u.a)(j,2),N=S[0],I=S[1],U=Object(n.useState)(!1),L=Object(u.a)(U,2),T=L[0],M=L[1];function F(e){return D.apply(this,arguments)}function D(){return(D=Object(l.a)(i.a.mark((function e(t){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B(t);case 3:return a=e.sent,n=z(a,t),d(n),e.abrupt("return","ok");case 9:e.prev=9,e.t0=e.catch(0),alert("error loading chats");case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function P(e){return W.apply(this,arguments)}function W(){return(W=Object(l.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(a=xt(t)).notificationSettings=JSON.parse(a.notificationSettings),a.isOnline="true"===a.isOnline,a.userId=parseInt(a.userId),a.isOnline,c(a),I(!0),e.next=10,F(a.userId);case 10:return I(!1),e.abrupt("return",a);case 14:throw e.prev=14,e.t0=e.catch(0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}function q(e,t){return H.apply(this,arguments)}function H(){return(H=Object(l.a)(i.a.mark((function e(t,a){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R(t,a);case 3:if(!(n=e.sent)){e.next=10;break}if(!n.text){e.next=7;break}return e.abrupt("return",n.text);case 7:return y("userToken",n.userToken,{maxAge:86400}),e.next=10,P(n.userToken);case 10:return e.abrupt("return","ok");case 13:throw e.prev=13,e.t0=e.catch(0),console.log(e.t0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}Object(n.useEffect)((function(){P(w.userToken).then((function(e){c(e),M(!0)})).catch((function(){return console.log("No cookie :(")}))}),[]),window.addEventListener("beforeunload",(function(e){Q(a.userId),Y()}));var Y=function(){g.invoke("UserWentOfflineOrOnline",!1,a.userId).then((function(){return g.stop()})).catch((function(e){return console.log(e)}))},G=function(){try{var e=jt.a.auth2.getAuthInstance();e.signOut().then(e.disconnect())}catch(t){console.log("Not a googler!")}};return r.a.createElement(tt.ToastProvider,null,r.a.createElement(ct.a,{className:"rocket"},r.a.createElement(f.d,null,r.a.createElement(f.b,{path:"/app"},r.a.createElement(St.Provider,{value:{user:a,chats:m,isLoading:N}},r.a.createElement(rt,{setHubConnection:v,setUser:c,setChats:d,SendMessage:function(e,t){var n=t,r=e;return function(e){var t=Ct.AES.encrypt(e,Ct.enc.Base64.parse(x),{iv:Ct.enc.Base64.parse(C)}).toString();g.invoke("SendDirectMessage",a.userId,r,t).catch((function(e){return console.log(e)})),d((function(t){var a=Object.assign([],t),r=a[n];return r.msg.push(new O({id:0,message:e,dateTime:new Date})),a.splice(n,1),a.unshift(r),a}))}},logout:function(){c(null),Y(),v(null),G(),k("userToken")},createNewChat:function(e,t,n){g.invoke("ChatWithUserWasCreated",a.userId,e,{chatId:e,chatName:a.userName,image:a.imageUrl}),d((function(a){var r=Object.assign([],a);return r.push({id:e,image:n,name:t,msg:[]}),r}))}}))),A.map((function(e){return r.a.createElement(f.b,{path:e,key:e},r.a.createElement(St.Provider,{value:{user:a,chats:m,isLoading:N}},r.a.createElement(kt,{path:e})))})),r.a.createElement(f.b,{path:"/register"},r.a.createElement(St.Provider,{value:{user:a,chats:m,isLoading:N}},r.a.createElement(kt,{path:"/register",loginOrRegister:q}))),r.a.createElement(f.b,null,r.a.createElement(St.Provider,{value:{user:a,chats:m,isLoading:N}},r.a.createElement(kt,{path:"/login",loginOrRegister:q})))),T?r.a.createElement(f.a,{to:"/app"}):r.a.createElement("div",null)))},It=(a(512),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function At(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(gt()("New update!","Rocket chat ".concat(L[0].version," was downloaded, close all tabs to update!"),"success"),console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}o.a.render(r.a.createElement(Nt,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/rocket-chat-front",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/rocket-chat-front","/service-worker.js");It?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):At(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):At(t,e)}))}}()}},[[310,1,2]]]);
//# sourceMappingURL=main.2c1bcc36.chunk.js.map